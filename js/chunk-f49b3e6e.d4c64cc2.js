(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f49b3e6e"],{"0798":function(e,t,s){"use strict";s("0c18");var r=s("10d2"),i=s("afdd"),a=s("9d26"),n=s("f2e7"),o=s("7560"),d=s("f40d"),l=s("58df"),c=s("d9bd");t["a"]=Object(l["a"])(r["a"],n["a"],d["a"]).extend({name:"v-alert",props:{border:{type:String,validator(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{["v-alert__border--"+this.border]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(i["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(a["a"],{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(a["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...r["a"].options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e["v-alert--border-"+this.border]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$"+this.type)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||o["a"].options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&Object(c["a"])("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},"0c18":function(e,t,s){},"0db6":function(e,t,s){"use strict";var r=s("a28a"),i=s.n(r);i.a},"1aae":function(e,t,s){e.exports=s.p+"img/table2.cb361b8d.png"},"1fb1":function(e,t,s){var r={"./table-1.png":"ed14","./table0.png":"e481","./table1.png":"61ad","./table2.png":"1aae"};function i(e){var t=a(e);return s(t)}function a(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="1fb1"},"269a":function(e,t){e.exports=function(e,t){var s="function"===typeof e.exports?e.exports.extendOptions:e.options;for(var r in"function"===typeof e.exports&&(s.directives=e.exports.options.directives),s.directives=s.directives||{},t)s.directives[r]=s.directives[r]||t[r]}},"510c":function(e,t,s){"use strict";var r=s("5b09"),i=s.n(r);i.a},"5b09":function(e,t,s){},"61ad":function(e,t,s){e.exports=s.p+"img/table1.cb361b8d.png"},"6ca7":function(e,t,s){},8138:function(e,t,s){e.exports=s.p+"img/takeaway.a8b07135.png"},"889b":function(e,t,s){e.exports=s.p+"img/cheff_m.53a4c640.png"},"8fb7":function(e,t,s){},9900:function(e,t,s){},a28a:function(e,t,s){},ac7c:function(e,t,s){"use strict";s("6ca7"),s("ec29");var r=s("9d26"),i=s("c37a"),a=s("5607"),n=s("2b0e"),o=n["default"].extend({name:"rippleable",directives:{ripple:a["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),e.on=Object.assign({click:this.onChange},this.$listeners),this.$createElement("div",e)):null},onChange(){}}}),d=s("8547"),l=s("58df"),c=Object(l["a"])(i["a"],o,d["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some(t=>this.valueComparator(t,e)):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=i["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:e=>{e.preventDefault(),this.onChange()}},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown},ref:"input"})},onBlur(){this.isFocused=!1},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const s=t.length;t=t.filter(t=>!this.valueComparator(t,e)),t.length===s&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(){this.isFocused=!0},onKeydown(e){}}});t["a"]=c.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(e){this.$nextTick(()=>this.inputIndeterminate=e)},inputIndeterminate(e){this.$emit("update:indeterminate",e)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(r["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...this.attrs$,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},ba26:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{xs12:""}},[e.loadingInitialData?s("VProgress",{staticClass:"text-center",attrs:{message:"Cargando"}}):[this.$store.getters.getCurrBranch?[e.cooksEnabled?e._e():s("v-container",[s("v-flex",[s("v-alert",{staticClass:"animated flash",attrs:{dense:"",tile:"",prominent:"",dismissible:"",dark:"",color:"warning",border:"left",icon:"warning"}},[e._v("\n            No existen elaboradores habilitados para el menú de hoy.\n            Solo podrán ser procesadas las órdenes que no\n            involucren alimentos elaborados.\n          ")])],1)],1),s("v-flex",{staticClass:"animated fadeIn",style:e.cooksEnabled?"":"margin-top: -30px"},[e.permissions.canList?s("Tables",{ref:"tablesComp",attrs:{tables:e.tables,takeAwayOrders:e.takeAwayOrders,assets:e.assets,perms:e.permissions},on:{setResponse:function(t){return e.setResponse(t)}}}):e._e(),e.permissions.canViewPending?[e.compCooksNotChosen?[s("CookingPartners",{on:{setChosenCooks:function(t){return e.setChosenCooks(t)}}})]:[s("PendingOrders",{attrs:{orders:e.pendingOrders}}),s("Cooks",{on:{setResponse:function(t){return e.setResponse(t)},disableTimer:function(t){return e.disableTimer()},enableTimer:function(t){return e.enableTimer()},setChosenCooks:function(t){return e.setChosenCooks(t)}}})]]:e._e()],2)]:[s("v-container",[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-alert",{staticClass:"animated flash",attrs:{dense:"",tile:"",prominent:"",dismissible:"",dark:"",color:"warning",border:"left",icon:"warning"}},[e._v("\n              Debe seleccionar una sucursal para poder usar esta\n              página\n            ")])],1)],1)],1)]],s("AxiosComponent",{ref:"axios",on:{finish:function(t){return e.handleHttpResponse(t)}}})],2)},i=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[e.perms.canCreateOPL?s("TakeAwayOrders",{attrs:{takeAwayOrders:e.takeAwayOrders},on:{showDlgMenu:function(t){return e.showDlgMenu()},setEditedTable:function(t){return e.setEditedTable(t)}}}):e._e(),e.perms.canCreateOPC?s("v-card",{attrs:{tile:""}},[s("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[s("v-icon",{staticClass:"white--text"},[e._v("local_dining")]),e._v("Mesas disponibles\n      "),s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{text:""},on:{click:function(t){return e.showDlgMenu()}}},[e._v("Ver menú")])],1),s("v-layout",{attrs:{wrap:"","text-center":"","mt-8":"","pb-2":""}},e._l(e.tables,(function(t,r){return s("v-flex",{key:"table-"+r,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[s("Table",{attrs:{table:t,perms:e.perms},on:{setEditedTable:function(t){return e.setEditedTable(t)}}})],1)})),1),s("TableOrders",{attrs:{drwOrders:e.drwOrders,editedTable:e.editedTable,perms:e.perms},on:{close:function(t){return e.closeDrwOrders()},showYesNoDialog:function(t){return e.showYesNoDialog(t)}}})],1):e._e(),s("SimpleTableDlg",{attrs:{visible:e.dlgViewMenu,width:700,title:"Menú",headers:e.dailyMenuHeaders,items:e.compDailyMenu},on:{close:function(t){e.dlgViewMenu=!1}}}),s("SimpleTableDlg",{attrs:{visible:e.dlgViewOrder,width:500,title:"Productos",headers:e.viewOrderHeaders,items:e.compEditedAssetsInfo},on:{close:function(t){e.dlgViewOrder=!1}}}),s("YesNoDlg",{attrs:{visible:e.dlgCheckout,width:500,title:"Cerrar orden",question:"Se dispone a cerrar la cuenta # "+e.editedOrder.order_number+" "+(1===e.editedOrder.order_type_id?"de la mesa "+e.editedOrder.table_number:"para llevar")+" con un monto de:",chip:e.compOrderPrice,processing:e.handlingOrder},on:{yes:function(t){return e.checkout()},no:function(t){e.dlgCheckout=!1}}}),s("YesNoDlg",{attrs:{visible:e.dlgCancelOrder,width:350,title:"Cancelar orden",question:"Se dispone a cancelar la orden # "+e.editedOrder.order_number+" "+(1===e.editedOrder.order_type_id?"de la mesa "+e.editedOrder.table_number:"para llevar")+" con un monto de:",chip:e.compOrderPrice,processing:e.handlingOrder},on:{yes:function(t){return e.cancelOrder()},no:function(t){e.dlgCancelOrder=!1}}}),s("YesNoDlg",{attrs:{visible:e.dlgServeProducts,width:350,title:"Servir productos",question:"Se dispone a servir los productos de la orden # "+(this.editedOrderIndex+1)+" de la mesa "+e.editedTable.table_number+".",chip:null,processing:e.handlingOrder},on:{yes:function(t){return e.serveProducts()},no:function(t){e.dlgServeProducts=!1}}}),s("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dlgEditOrder,callback:function(t){e.dlgEditOrder=t},expression:"dlgEditOrder"}},[s("v-card",[s("v-card-title",{class:"headline "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[e._v("Mesa "+e._s(e.editedTable.table_number))]),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:"","mb-3":""}},[s("v-flex",{attrs:{xs12:""}},[s("v-btn",{class:e.$store.getters.getThemeColor+" white--text",attrs:{disabled:e.editedAssetsLength>0&&!e.validAssetForm},on:{click:function(t){return e.addAsset()}}},[s("v-icon",[e._v("mdi-food")]),e._v("Agregar\n              ")],1)],1)],1),s("v-form",{ref:"form",on:{submit:function(e){e.preventDefault()}},model:{value:e.validAssetForm,callback:function(t){e.validAssetForm=t},expression:"validAssetForm"}},[e._l(e.editedAssets,(function(t,r){return s("v-layout",{key:"prod-"+r,attrs:{wrap:""}},[s("v-flex",{attrs:{xs8:"",sm6:""}},[s("v-autocomplete",{staticStyle:{"max-height":"20px!important"},attrs:{"small-chips":"",rules:e.requiredRules,readonly:"1"===t.finished,items:e.assets,"item-color":e.$store.getters.getThemeColor,"item-text":"name","item-value":"id",label:"Producto","no-data-text":"No hay resultados"},on:{change:function(t){return e.removeDuplicateAssets()}},scopedSlots:e._u([{key:"item",fn:function(t){return[s("v-list-item-content",[s("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}}),s("v-list-item-subtitle",{domProps:{innerHTML:e._s("Precio: $"+t.item.price+(t.item.grams?" ("+t.item.grams+" gramos)":""))}})],1)]}}],null,!0),model:{value:t.asset_id,callback:function(s){e.$set(t,"asset_id",s)},expression:"editedAssetAux.asset_id"}})],1),s("v-flex",{attrs:{xs4:"",sm2:""}},[s("v-text-field",{attrs:{rules:e.numberRules,disabled:"1"===t.finished,label:"Unidades",type:"number"},model:{value:t.quantity,callback:function(s){e.$set(t,"quantity",s)},expression:"editedAssetAux.quantity"}})],1),s("v-flex",{attrs:{xs4:"",sm2:""}},[s("v-text-field",{attrs:{readonly:"",disabled:"1"===t.finished,value:e.getAssetPriceById(t.asset_id,t.quantity),label:"Precio"}})],1),s("v-flex",{attrs:{xs12:"",sm2:""}},[s("v-btn",{staticClass:"error",attrs:{width:"100%"},on:{click:function(t){return e.removeAsset(r)}}},[s("v-icon",[e._v("delete")])],1)],1)],1)})),s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("span",[e._v("Total:")]),s("v-chip",[s("v-icon",{attrs:{left:""}},[e._v("attach_money")]),e._v("\n                  "+e._s(e.compOrderPrice)+"\n                ")],1)],1)],1)],2)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:e.editedAssetsLength<1||!e.validAssetForm||e.handlingOrder,color:e.$store.getters.getThemeColor,text:""},on:{click:function(t){return e.sendOrder()}}},[e.handlingOrder?s("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:""}}):e._e(),s("span",{domProps:{innerHTML:e._s(e.editedOrder.id?"Editar":"Agregar")}})],1),s("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){e.dlgEditOrder=!1}}},[e._v("Cancelar")])],1)],1)],1),s("AxiosComponent",{ref:"axios",on:{finish:function(t){return e.handleHttpResponse(t)}}})],1)},n=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-menu",{attrs:{"close-on-click":"",dark:"","offset-y":"",transition:"fade-transition",bottom:"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[r("v-flex",{staticClass:"text-center align-center"},[r("v-btn",{attrs:{text:"",disabled:""}},[e.table.orders_status_count?e._l(e.table.orders_status_count,(function(t,s){return r("v-badge",{key:"badge-"+s,staticClass:"animated slideInDown",style:"bottom: 32px; left: "+(19+20*s)+"px;",attrs:{color:t.icon_color,overlap:""},scopedSlots:e._u([{key:"badge",fn:function(){return[r("span",[e._v(e._s(t.count))])]},proxy:!0}],null,!0)})})):e._e(),r("v-img",{attrs:{src:s("1fb1")("./table"+e.table.status_id+".png"),width:"70px"}})],2)],1),r("v-flex",{attrs:{"mt-6":""}},[r("v-chip",e._g({staticClass:"table-number-menu"},i),[e._v("Mesa "+e._s(e.table.table_number))])],1)]}}])},[r("v-list",[e.perms.canCreateOPC?r("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.setEditedTable("add")}}},[r("v-icon",[e._v("local_dining")]),r("span",[e._v("Agregar orden")])],1):e._e(),-1!==e.table.status_id&&(e.perms.canEdit||e.perms.canDelete||e.perms.canCheckout)?r("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.setEditedTable("view-orders")}}},[r("v-icon",[e._v("local_dining")]),r("span",[e._v("Ver órdenes")])],1):e._e()],1)],1)},d=[],l={data(){return{handlingOrder:!1,editedOrdersByCategory:[],editedOrdersListIndex:-1,editedOrder:{},editedOrderIndex:{},editedAssets:[],editedAsset:{},drwOrders:!1,dlgTableOrder:!1,dlgCheckout:!1,dlgCancelOrder:!1,validAssetForm:!1,requiredRules:[e=>!!e||"Dato obligatorio"],numberRules:[e=>!!e||"Dato obligatorio",e=>e>0||"Dato incorrecto"],timer:null}},components:{},props:["table","perms"],methods:{setEditedTable(e){this.$emit("setEditedTable",{table:this.table,action:e,order_type:1})}}},c=l,u=(s("0db6"),s("2877")),h=s("6544"),p=s.n(h),m=s("4ca6"),v=s("8336"),g=s("cc20"),b=s("0e8f"),C=s("132d"),f=s("adda"),_=s("8860"),k=s("da13"),x=s("e449"),O=Object(u["a"])(c,o,d,!1,null,"2c328b05",null),w=O.exports;p()(O,{VBadge:m["a"],VBtn:v["a"],VChip:g["a"],VFlex:b["a"],VIcon:C["a"],VImg:f["a"],VList:_["a"],VListItem:k["a"],VMenu:x["a"]});var y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.drwOrders?s("v-navigation-drawer",{attrs:{absolute:"",temporary:"",permanent:e.drwOrders,right:"",bottom:""},model:{value:e.drwOrders,callback:function(t){e.drwOrders=t},expression:"drwOrders"}},[s("v-list-item",{staticClass:"grey"},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"uppercase"},[e._v("Mesa "+e._s(e.editedTable.table_number))])],1),s("v-list-item-icon",[s("v-icon",{on:{click:function(t){return e.$emit("close")}}},[e._v("close")])],1)],1),s("v-divider"),s("v-list",{attrs:{dense:""}},e._l(e.editedTable.orders,(function(t,r){return s("v-list-item",{key:"order-"+r},[s("v-list-item-content",[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs6:""}},[s("v-chip",{attrs:{small:"",pill:"",link:""},on:{click:function(t){return e.emitEvent("dlgViewOrder",r)}}},[s("v-avatar",{class:t.gui_attribs.icon_color,attrs:{left:""}},[s("v-icon",{staticClass:"white--text",attrs:{size:"20"}},[e._v(e._s(t.gui_attribs.icon))])],1),s("span",[e._v("Orden #"+e._s(t.order_number))])],1)],1),s("v-flex",[s("v-layout",[t.gui_attribs.edit&&e.perms.canEdit?s("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"warning--text",on:{click:function(t){return e.emitEvent("dlgEditOrder",r)}}},[e._v("edit")]):e._e(),t.gui_attribs.serve?s("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"success--text",on:{click:function(t){return e.emitEvent("dlgServeProducts",r)}}},[e._v("check")]):e._e(),t.gui_attribs.checkout&&e.perms.canCheckout?s("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"success--text",on:{click:function(t){return e.emitEvent("dlgCheckout",r)}}},[e._v("attach_money")]):e._e(),t.gui_attribs.delete&&e.perms.canDelete?s("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"error--text",on:{click:function(t){return e.emitEvent("dlgCancelOrder",r)}}},[e._v("delete")]):e._e()],1)],1)],1)],1)],1)})),1)],1):e._e()},V=[],A={data(){return{editedOrder:null,editedAssets:null,dlgViewOrder:!1}},props:["drwOrders","editedTable","perms"],methods:{emitEvent(e,t){this.$emit("showYesNoDialog",{action:e,orderIndex:t})}}},I=A,$=(s("e98a"),s("8212")),T=s("ce7e"),D=s("a722"),E=s("5d23"),P=s("34c3"),B=s("f774"),L=s("269a"),S=s.n(L),F=s("5607"),M=Object(u["a"])(I,y,V,!1,null,"2c2d970e",null),N=M.exports;p()(M,{VAvatar:$["a"],VChip:g["a"],VDivider:T["a"],VFlex:b["a"],VIcon:C["a"],VLayout:D["a"],VList:_["a"],VListItem:k["a"],VListItemContent:E["a"],VListItemIcon:P["a"],VListItemTitle:E["c"],VNavigationDrawer:B["a"]}),S()(M,{Ripple:F["a"]});var q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{width:e.width,persistent:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("v-card",[s("v-card-title",{class:"headline "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[e._v(e._s(e.title))]),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"hide-default-footer":"",items:e.items,"no-data-text":"No hay elementos"}})],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v("Cerrar")])],1)],1)],1)},R=[],j={props:["visible","width","title","headers","items"]},Y=j,H=s("b0af"),z=s("99d9"),U=s("a523"),W=s("8fea"),J=s("169a"),K=s("2fa4"),G=Object(u["a"])(Y,q,R,!1,null,null,null),Q=G.exports;p()(G,{VBtn:v["a"],VCard:H["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VContainer:U["a"],VDataTable:W["a"],VDialog:J["a"],VSpacer:K["a"]});var X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{width:e.width,persistent:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[s("v-card",[s("v-card-title",{class:"headline "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[e._v(e._s(e.title))]),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card-text",[e._v(e._s(e.question))]),e.chip?s("v-card-text",{staticClass:"text-center"},[s("v-chip",{staticClass:"error",attrs:{label:"",large:""}},[s("v-icon",{attrs:{"x-large":"",color:"white",medium:"",left:""}},[e._v("attach_money")]),s("span",{staticClass:"display-1 font-weight-bold"},[e._v(e._s(e.chip))])],1)],1):e._e(),s("v-card-text",[e._v("¿Confirma que desea continuar?")])],1)],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{disabled:e.processing,color:e.$store.getters.getThemeColor,text:""},on:{click:function(t){return e.$emit("yes")}}},[e.processing?s("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:""}}):e._e(),s("span",[e._v("Continuar")])],1),s("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("no")}}},[e._v("Cancelar")])],1)],1)],1)},Z=[],ee={props:["visible","width","title","question","chip","processing"]},te=ee,se=s("490a"),re=Object(u["a"])(te,X,Z,!1,null,null,null),ie=re.exports;p()(re,{VBtn:v["a"],VCard:H["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VChip:g["a"],VContainer:U["a"],VDialog:J["a"],VDivider:T["a"],VFlex:b["a"],VIcon:C["a"],VLayout:D["a"],VProgressCircular:se["a"],VSpacer:K["a"]});var ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"mb-5 pb-3",attrs:{tile:""}},[s("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[s("v-icon",{staticClass:"white--text"},[e._v("card_giftcard")]),e._v("Órdenes para\n    llevar\n    "),s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{text:""},on:{click:function(t){return e.showDlgMenu()}}},[e._v("Ver menú")])],1),s("v-layout",[s("v-spacer"),s("v-btn",{class:e.$store.getters.getThemeColor+" white--text mt-4 mr-4",on:{click:function(t){return e.setEditedTable("add")}}},[s("v-icon",[e._v("mdi-clipboard-check")]),e._v("Nueva\n    ")],1)],1),e.takeAwayOrders.length>0?s("v-layout",{attrs:{wrap:"","mt-8":"","pb-2":""}},e._l(e.takeAwayOrders,(function(e,t){return s("v-flex",{key:"table-"+t,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[s("TakeAwayOrder",{attrs:{order:e}})],1)})),1):s("v-layout",{attrs:{wrap:""}},[s("v-flex",[s("p",{staticClass:"title text-center mt-5"},[e._v("No se han encontrado órdenes para llevar.")])])],1)],1)},ne=[],oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-layout",{attrs:{wrap:""}},[r("v-flex",[r("v-btn",{attrs:{text:"",disabled:""}},[r("v-img",{attrs:{src:s("8138"),width:"52px"}})],1),r("br"),r("v-menu",{attrs:{"close-on-click":"","offset-y":"",transition:"fade-transition",bottom:"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[r("v-btn",e._g({staticClass:"mt-6",class:e.order.gui_attribs.icon_color,attrs:{width:"120"}},s),[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-icon",{staticClass:"white--text",attrs:{size:"20"}},[e._v(e._s(e.order.gui_attribs.icon))]),e._v("\n                "+e._s("Orden #"+e.order.order_number)+"\n              ")],1)],1)],1)]}}])},[r("v-list",[e.order.gui_attribs.edit?r("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgViewOrder")}}},[r("v-icon",[e._v("pageview")]),r("span",[e._v("Detalles")])],1):e._e(),e.order.gui_attribs.edit?r("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgEditOrder")}}},[r("v-icon",[e._v("edit")]),r("span",[e._v("Editar")])],1):e._e(),e.order.gui_attribs.delete?r("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgCancelOrder")}}},[r("v-icon",[e._v("close")]),r("span",[e._v("Eliminar")])],1):e._e(),e.order.gui_attribs.checkout?r("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgCheckout")}}},[r("v-icon",[e._v("attach_money")]),r("span",[e._v("Cerrar cuenta")])],1):e._e()],1)],1)],1)],1)],1)},de=[],le={data(){return{}},components:{},props:["order"],methods:{showYesNoDialog(e){this.$root.$emit("showYesNoDialog",{action:e,order:this.order})}}},ce=le,ue=Object(u["a"])(ce,oe,de,!1,null,null,null),he=ue.exports;p()(ue,{VBtn:v["a"],VContainer:U["a"],VFlex:b["a"],VIcon:C["a"],VImg:f["a"],VLayout:D["a"],VList:_["a"],VListItem:k["a"],VMenu:x["a"]});var pe={data(){return{handlingOrder:!1,editedOrdersByCategory:[],editedOrdersListIndex:-1,editedOrder:{},editedOrderIndex:{},editedAssets:[],editedAsset:{},drwOrders:!1,dlgTableOrder:!1,dlgCheckout:!1,dlgCancelOrder:!1,validAssetForm:!1,requiredRules:[e=>!!e||"Dato obligatorio"],numberRules:[e=>!!e||"Dato obligatorio",e=>e>0||"Dato incorrecto"],timer:null}},components:{TakeAwayOrder:he},props:["table","perms","takeAwayOrders"],methods:{showDlgMenu(){this.$emit("showDlgMenu")},setEditedTable(e){this.$emit("setEditedTable",{table:-1,action:e,order_type:2})}}},me=pe,ve=(s("f6ac"),Object(u["a"])(me,ae,ne,!1,null,"39e0fdfe",null)),ge=ve.exports;p()(ve,{VBtn:v["a"],VCard:H["a"],VCardTitle:z["c"],VFlex:b["a"],VIcon:C["a"],VLayout:D["a"],VSpacer:K["a"]});var be={data(){return{handlingOrder:!1,editedTable:{},editedTableIndex:-1,editedOrders:[],editedOrdersListIndex:-1,editedOrder:{},editedOrderIndex:{},editedAssets:[],editedAsset:{},dailyMenu:[],drwOrders:!1,dlgViewMenu:!1,dlgViewOrder:!1,dlgEditOrder:!1,dlgCheckout:!1,dlgCancelOrder:!1,dlgServeProducts:!1,validAssetForm:!1,requiredRules:[e=>!!e||"Dato obligatorio"],numberRules:[e=>!!e||"Dato obligatorio",e=>e>0||"Dato incorrecto"],dailyMenuHeaders:[{text:"Categoría",value:"group"},{text:"Producto",value:"name"},{text:"Precio",value:"price"},{text:"Cantidad",value:"grams"}],viewOrderHeaders:[{text:"Producto",value:"name"},{text:"Precio",value:"price"},{text:"Cantidad",value:"quantity"},{text:"Estado",value:"status"}]}},components:{Table:w,TableOrders:N,SimpleTableDlg:Q,YesNoDlg:ie,TakeAwayOrders:ge},props:["tables","takeAwayOrders","assets","perms"],mounted(){this.$root.$on("showYesNoDialog",e=>{this.editedOrder=Object.assign({},e.order),this.setEditedAssets(),this.activateDlgFlag(e.action)})},watch:{editedOrders:function(e,t){e||(this.drwOrders=!1)}},computed:{compEditedAssetsInfo(){let e=[];return this.editedAssets.forEach(t=>{e.push({name:this.getAssetById(t.asset_id).name,quantity:t.quantity,price:this.getAssetPriceById(t.asset_id,t.quantity),status:"1"===t.finished?"Servido":"Pendiente"})}),e.push({name:"TOTAL",price:this.compOrderPrice}),e},compDailyMenu(){let e=[];return this.assets.forEach(t=>{t.divider||t.header||e.push(t)}),e},compOrderPrice(){let e=0;return this.editedAssets.forEach(t=>{e+=this.getAssetPriceById(t.asset_id,parseInt(t.quantity))}),e},editedAssetsLength(){return this.editedAssets.length}},methods:{closeDrwOrders(){this.drwOrders=!1,this.editedOrders=[]},setEditedAssets(){this.editedAssets=[],this.editedOrder.assets.forEach(e=>{e.price=this.getAssetById(e.asset_id).price,this.editedAssets.push(e)})},setEditedOrder(e){this.editedOrderIndex=e;let t=this.editedOrders[e];this.editedOrder=Object.assign({},t),this.setEditedAssets()},showDlgMenu(){this.dlgViewMenu=!0},showYesNoDialog(e){this.setEditedOrder(e.orderIndex),this.activateDlgFlag(e.action)},activateDlgFlag(e){switch(e){case"dlgEditOrder":this.dlgEditOrder=!0;break;case"dlgServeProducts":this.dlgServeProducts=!0;break;case"dlgCheckout":this.dlgCheckout=!0;break;case"dlgViewOrder":this.dlgViewOrder=!0;break;case"dlgCancelOrder":this.dlgCancelOrder=!0;break;default:break}},setEditedTable(e){switch(this.editedTable=e.table,this.editedTableIndex=this.tables.indexOf(this.editedTable),e.action){case"add":this.editedOrder={order_type_id:e.order_type},this.editedAssets=[],this.dlgEditOrder=!0;break;case"view-orders":this.editedOrders=this.editedTable.orders,this.drwOrders=!0;break;case"checkout":this.dlgCheckout=!0;break;case"cancel":this.dlgCancelOrder=!0;break}},getAssetById(e){let t=this.assets.find(t=>t.id===e);return t},getAssetPriceById(e,t){if(!e)return 0;let s=this.getAssetById(e);return s?parseInt(s.price)*(t?parseInt(t):1):0},removeAsset(e){this.editedAssets.splice(e,1),this.removeDuplicateAssets()},removeDuplicateAssets(){let e=[];for(let t=0;t<this.editedAssetsLength;t++){this.editedAssets[t].price=this.getAssetById(this.editedAssets[t].asset_id).price;let s=e.findIndex(e=>e.asset_id===this.editedAssets[t].asset_id&&"0"===e.finished);s>=0?e[s].quantity=parseInt(e[s].quantity)+parseInt(this.editedAssets[t].quantity):e.push(this.editedAssets[t])}this.editedAssets=e},addAsset(){this.removeDuplicateAssets(),this.editedAsset={quantity:1,finished:"0"},this.editedAssets.push(this.editedAsset)},sendOrder(){if(this.removeDuplicateAssets(),!this.handlingOrder){this.handlingOrder=!0;var e={url:this.editedOrder.id?"ordenes/editar":"ordenes/crear",snackbar:!0,method:"post",params:{item:{table_number:this.editedTable.table_number,id:this.editedOrder.id,order_type_id:this.editedOrder.order_type_id},assets:this.editedAssets,branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(e)}},cancelOrder(){if(!this.handlingOrder){this.handlingOrder=!0;var e={url:"ordenes/eliminar",snackbar:!0,method:"post",params:{id:this.editedOrder.id,table_number:this.editedTable.table_number,branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(e)}},serveProducts(){if(!this.handlingOrder){this.handlingOrder=!0;var e={url:"ordenes/servir-productos",snackbar:!0,method:"post",params:{id:this.editedOrder.id,table_number:this.editedTable.table_number,branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(e)}},checkout(){if(!this.handlingOrder){this.handlingOrder=!0;var e={url:"ordenes/cerrar",snackbar:!0,method:"post",params:{id:this.editedOrder.id,table_number:this.editedTable.table_number,cooks:this.$store.getters.getChosenCooksIDs.join(),branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(e)}},updateCurrTableAndOrders(e){this.editedTableIndex>-1&&(this.editedTable=e.data.tables[this.editedTableIndex],this.editedOrders=this.editedTable.orders)},handleHttpResponse(e){if(200===e.data.result.code){let t=e.data.result.response;this.handlingOrder=!1,this.dlgEditOrder=!1,this.dlgCheckout=!1,this.dlgCancelOrder=!1,this.dlgServeProducts=!1,"success"===t.code&&this.$emit("setResponse",t),this.updateCurrTableAndOrders(t)}}}},Ce=be,fe=(s("510c"),s("c6a6")),_e=s("4bd4"),ke=s("8654"),xe=Object(u["a"])(Ce,a,n,!1,null,"323da424",null),Oe=xe.exports;p()(xe,{VAutocomplete:fe["a"],VBtn:v["a"],VCard:H["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VChip:g["a"],VContainer:U["a"],VDialog:J["a"],VDivider:T["a"],VFlex:b["a"],VForm:_e["a"],VIcon:C["a"],VLayout:D["a"],VListItemContent:E["a"],VListItemSubtitle:E["b"],VListItemTitle:E["c"],VProgressCircular:se["a"],VSpacer:K["a"],VTextField:ke["a"]});var we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-card",{staticClass:"pb-4",attrs:{tile:""}},[s("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[s("v-icon",{staticClass:"white--text"},[e._v("access_time")]),e._v("Órdenes en cola")],1),e.orders.length>0?s("v-layout",{attrs:{wrap:"","mt-8":"","pb-2":""}},e._l(e.orders,(function(e,t){return s("v-flex",{key:"table-"+t,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[s("PendingOrder",{attrs:{order:e}})],1)})),1):s("v-layout",{attrs:{wrap:""}},[s("v-flex",[s("p",{staticClass:"title text-center mt-8"},[e._v("No se han encontrado órdenes en cola.")])])],1)],1)],1)},ye=[],Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{wrap:""}},[1===e.order.order_type_id?r("v-flex",{attrs:{"mt-4":""}},[r("v-btn",{attrs:{text:"",disabled:""}},[r("v-img",{attrs:{src:s("1fb1")("./table"+e.order.status_id+".png"),width:"70px"}})],1),r("br"),r("v-chip",{staticClass:"mt-1",attrs:{label:""}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-tag")]),r("span",{domProps:{innerHTML:e._s((1===e.order.order_type_id?"Mesa "+e.order.table_number:"Para llevar")+" - orden "+e.order.order_number)}})],1),r("br"),e._l(e.order.assets,(function(t,s){return r("div",{key:"orderAsset-"+s},[r("span",[e._v(e._s(t.name))]),r("v-chip",{staticClass:"ml-1 error",attrs:{"x-small":""}},[e._v(e._s(t.quantity))]),r("br")],1)}))],2):r("v-flex",[r("v-btn",{attrs:{text:"",disabled:""}},[r("v-img",{attrs:{src:s("8138"),width:"50px"}})],1),r("br"),r("v-chip",{staticClass:"mt-5",attrs:{label:""}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-tag")]),r("span",{domProps:{innerHTML:e._s((1===e.order.order_type_id?"Mesa "+e.order.table_number:"Para llevar")+" - orden "+e.order.order_number)}})],1),r("br"),e._l(e.order.assets,(function(t,s){return r("div",{key:"orderAsset-"+s},[r("span",[e._v(e._s(t.name))]),r("v-chip",{staticClass:"ml-1 error",attrs:{"x-small":""}},[e._v(e._s(t.quantity))]),r("br")],1)}))],2)],1)},Ae=[],Ie={data(){return{}},components:{},props:["order"],methods:{}},$e=Ie,Te=Object(u["a"])($e,Ve,Ae,!1,null,null,null),De=Te.exports;p()(Te,{VBtn:v["a"],VChip:g["a"],VFlex:b["a"],VIcon:C["a"],VImg:f["a"],VLayout:D["a"]});var Ee={data(){return{}},components:{PendingOrder:De},props:["orders"]},Pe=Ee,Be=(s("d3e7"),Object(u["a"])(Pe,we,ye,!1,null,"5ba84c70",null)),Le=Be.exports;p()(Be,{VCard:H["a"],VCardTitle:z["c"],VContainer:U["a"],VFlex:b["a"],VIcon:C["a"],VLayout:D["a"]});var Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-card",{attrs:{tile:""}},[s("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[s("v-icon",{staticClass:"white--text"},[e._v("mdi-account")]),e._v("Elaboradores seleccionados\n      "),s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:function(t){return e.showdlgChooseCooks()}}},[s("v-icon",{attrs:{color:"white"}},[e._v("mdi-account-switch")])],1)],1),s("v-layout",{attrs:{wrap:"","text-center":"","mt-8":""}},e._l(e.$store.getters.getChosenCooks,(function(t,r){return s("v-flex",{key:"table-"+r,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[s("Cook",{attrs:{cook:t},on:{showDlgFinish:function(t){return e.setEditedCook(t)}}})],1)})),1),s("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dlgChooseCooks,callback:function(t){e.dlgChooseCooks=t},expression:"dlgChooseCooks"}},[s("v-card",[s("v-card-title",{staticClass:"subtitle grey lighten-2"},[e._v("Actualizar elaboradores")]),s("v-container",[s("div",e._l(e.branchCooks,(function(t){return s("v-checkbox",{key:t.id,attrs:{label:t.full_name,value:t},model:{value:e.newChosenCooks,callback:function(t){e.newChosenCooks=t},expression:"newChosenCooks"}})})),1)]),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:e.$store.getters.getThemeColor,text:""},on:{click:function(t){return e.setChosenCooks()}}},[s("span",[e._v("Aceptar")])]),s("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.closeDlgChooseCooks()}}},[e._v("Cancelar")])],1)],1)],1),s("YesNoDlg",{attrs:{visible:e.dlgFinish,width:350,title:"Terminar orden",question:"Se dispone a dar por terminada la orden actual de "+e.editedCook.full_name+".",chip:null,processing:e.handlingOrder},on:{yes:function(t){return e.finishOrder()},no:function(t){e.dlgFinish=!1}}}),s("AxiosComponent",{ref:"axios",on:{finish:function(t){return e.handleHttpResponse(t)}}})],1)],1)},Fe=[],Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{wrap:""}},[r("v-flex",{staticClass:"pb-3"},[r("v-card",[r("div",{staticClass:"d-flex flex-column align-center mb-3"},[r("v-img",{attrs:{src:s("F"===e.cook.sex?"f7b4":"889b"),width:"70px"}}),r("v-chip",{staticClass:"mt-1 cyan darken-3",attrs:{label:"",dark:""}},[e._v(e._s(""+e.cook.full_name))])],1),r("v-divider"),e.cook.current_order?[r("p",[r("v-chip",{staticClass:"mt-1",attrs:{label:""}},[r("v-icon",[e._v("mdi-tag")]),r("span",{domProps:{innerHTML:e._s((1===e.cook.current_order.order_type_id?"Mesa "+e.cook.current_order.table_number:"Para llevar")+" - orden "+e.cook.current_order.order_number)}})],1),r("br"),r("v-chip",{staticClass:"warning darken-1 mt-1",attrs:{label:""}},[r("v-icon",{staticClass:"white--text"},[e._v("mdi-timelapse")]),e._v("\n            "+e._s(e.cook.current_order.elapsed_time)+"\n          ")],1)],1),e._l(e.cook.current_order.assets,(function(t,s){return r("div",{key:"orderAsset-"+s},[r("span",[r("v-icon",{attrs:{small:""}},[e._v("local_dining")]),e._v("\n            "+e._s(t.asset_name)+"\n          ")],1),r("v-chip",{staticClass:"ml-1 error",attrs:{"x-small":""}},[e._v(e._s(t.quantity))]),r("br")],1)})),r("v-btn",{class:e.$store.getters.getThemeColor+" mt-3 no-radius white--text",attrs:{large:"",width:"100%"},on:{click:function(t){return e.$emit("showDlgFinish",e.cook)}}},[r("v-icon",[e._v("check")]),e._v("Terminar\n        ")],1)]:[r("p",{staticClass:"mt-3 pb-3 warning--text"},[e._v("No tiene orden asignada.")])]],2)],1)],1)},Ne=[],qe={props:["cook"]},Re=qe,je=Object(u["a"])(Re,Me,Ne,!1,null,null,null),Ye=je.exports;p()(je,{VBtn:v["a"],VCard:H["a"],VChip:g["a"],VDivider:T["a"],VFlex:b["a"],VIcon:C["a"],VImg:f["a"],VLayout:D["a"]});var He={data(){return{editedCook:{current_order:{}},handlingOrder:!1,dlgFinish:!1,dlgChooseCooks:!1,branchCooks:[],newChosenCooks:[]}},components:{Cook:Ye,YesNoDlg:ie},mounted(){this.branchCooks=this.$store.getters.getCooks[this.$store.getters.getCurrBranchID]},methods:{showdlgChooseCooks(){this.newChosenCooks=[],this.dlgChooseCooks=!0,this.$emit("disableTimer")},closeDlgChooseCooks(){this.dlgChooseCooks=!1,this.$emit("enableTimer")},setChosenCooks(){this.$emit("setChosenCooks",this.newChosenCooks),this.dlgChooseCooks=!1},setEditedCook(e){this.editedCook=e,this.dlgFinish=!0},finishOrder(e){if(!this.handlingOrder){this.handlingOrder=!0;var t={url:"ordenes/elaborar",snackbar:!0,method:"post",params:{id:this.editedCook.current_order.id,cook_id:this.editedCook.id,cooks:this.$store.getters.getChosenCooksIDs.join(),table_number:this.editedCook.current_order.table_number,branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(t)}},handleHttpResponse(e){this.handlingOrder=!1;var t=e.data.result.response;this.operationMessage=t.msg,this.operationMessageType=t.code,this.dlgFinish=!1,"success"===t.code&&this.$emit("setResponse",t)}}},ze=He,Ue=(s("bfb0"),s("ac7c")),We=Object(u["a"])(ze,Se,Fe,!1,null,"52a98dec",null),Je=We.exports;p()(We,{VBtn:v["a"],VCard:H["a"],VCardActions:z["a"],VCardTitle:z["c"],VCheckbox:Ue["a"],VContainer:U["a"],VDialog:J["a"],VDivider:T["a"],VFlex:b["a"],VIcon:C["a"],VLayout:D["a"],VSpacer:K["a"]});var Ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-card",{staticClass:"pb-4",attrs:{tile:""}},[s("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[s("v-icon",{staticClass:"white--text"},[e._v("mdi-account")]),e._v("Elaboradores para esta pantalla\n    ")],1),s("v-layout",[s("v-flex",{staticClass:"animated fadeIn text-center",attrs:{xs10:"","offset-xs1":"",sm8:"","offset-sm2":"",md6:"","offset-md3":"","mt-10":""}},e._l(e.cooks,(function(t,r){return s("v-chip",{key:"cook-"+r,staticClass:"ml-1",attrs:{link:"",label:"",disabled:t.readOnly,color:e.getCookColor(r),"text-color":"white"},on:{click:function(t){return e.toggleActiveCook(r)}}},[s("v-avatar",{attrs:{left:""}},[s("v-icon",[e._v(e._s(e.getCookIcon(r)))])],1),e._v("\n          "+e._s(t.full_name)+"\n        ")],1)})),1)],1),s("v-layout",[s("v-flex",{staticClass:"text-center mt-2"},[s("v-btn",{staticClass:"success",attrs:{disabled:0===e.chosenCooks.length},on:{click:e.setChosenCooks}},[s("v-icon",{staticClass:"fa"},[e._v("check")]),e._v("Aceptar\n        ")],1)],1)],1)],1)],1)},Ge=[],Qe={data(){return{cooks:[],chosenCooks:[]}},props:["orders"],mounted(){this.cooks=this.$store.getters.getPayload.cooks[this.$store.getters.getCurrBranchID];let e=this.$store.getters.getUserID,t=this.cooks.findIndex(t=>parseInt(t.id)===e);t>=0&&(this.cooks[t].readOnly=!0,this.chosenCooks.push(this.cooks[t]))},methods:{getCookIcon(e){return this.getSelectedCooksIndex(e)>=0?"mdi-checkbox-marked-circle":"mdi-close"},getCookColor(e){return this.getSelectedCooksIndex(e)>=0?"info":"grey"},getSelectedCooksIndex(e){let t=this.cooks[e].id;return this.chosenCooks.findIndex(e=>e.id===t)},toggleActiveCook(e){let t=this.getSelectedCooksIndex(e);-1===t?this.chosenCooks.push(this.cooks[e]):this.chosenCooks.splice(t,1)},setChosenCooks(){this.$emit("setChosenCooks",this.chosenCooks)}}},Xe=Qe,Ze=Object(u["a"])(Xe,Ke,Ge,!1,null,null,null),et=Ze.exports;p()(Ze,{VAvatar:$["a"],VBtn:v["a"],VCard:H["a"],VCardTitle:z["c"],VChip:g["a"],VContainer:U["a"],VFlex:b["a"],VIcon:C["a"],VLayout:D["a"]});var tt={data(){return{loadingInitialData:!0,loadingData:!1,cooksEnabled:!0,tables:[],assets:[],takeAwayOrders:[],pendingOrders:[],cooks:[],timer:null,permissions:{canList:!1,canCreateOPC:!1,canCreateOPL:!1,canEdit:!1,canDelete:!1,canViewPending:!1,canCook:!1,canCheckout:!1},timerEnabled:!1}},components:{Tables:Oe,PendingOrders:Le,Cooks:Je,CookingPartners:et},computed:{compCooksNotChosen(){return 0===this.$store.getters.getChosenCooks.length}},created(){this.$store.getters.getPermissions("Clientes").forEach(e=>{e.perms.forEach(e=>{switch(e.text){case"Listar":this.permissions.canList=!0;break;case"Crear OPC":this.permissions.canCreateOPC=!0;break;case"Crear OPL":this.permissions.canCreateOPL=!0;break;case"Editar":this.permissions.canEdit=!0;break;case"Cancelar":this.permissions.canDelete=!0;break;case"Elaborar OPC":case"Elaborar OPL":this.permissions.canCook=!0;break;case"Ver pendientes":this.permissions.canViewPending=!0;break;case"Cerrar cuenta":this.permissions.canCheckout=!0;break;default:break}})}),this.permissions.canList||this.permissions.canViewPending||this.$router.push("/403")},mounted(){this.$root.$emit("resetNotifications"),(this.$store.getters.isWaiter||this.$store.getters.getChosenCooksIDs.length>0)&&this.enableTimer(),this.getDataFromApi()},beforeRouteLeave(e,t,s){this.$root.$emit("resetNotifications"),s()},methods:{disableTimer(){this.timer&&(clearInterval(this.timer),this.timerEnabled=!1)},enableTimer(){this.timerEnabled||(this.timer=setInterval(this.getDataFromApi,5e3),this.timerEnabled=!0)},setResponse(e){this.tables=e.data.tables,this.takeAwayOrders=e.data.takeaway_orders,this.assets=e.data.assets,this.pendingOrders=e.data.orders,this.cooks=e.data.cooks,this.cooksEnabled=e.data.cooks_enabled,this.$store.commit("setChosenCooks",this.cooks),this.$root.$emit("setNotifications",e.data.notifications)},handleHttpResponse(e){if(this.loadingData=!1,this.loadingInitialData=!1,200===e.data.result.code){var t=e.data.result.response;switch(this.operationMessage=t.msg,this.operationMessageType=t.code,e.url.substring(e.url.lastIndexOf("/")+1)){case"listar":"success"===t.code&&(this.setResponse(t),this.$refs.tablesComp&&this.$refs.tablesComp.updateCurrTableAndOrders(t));break;case"ver-pendientes":"success"===t.code&&this.setResponse(t);break;default:break}}},getDataFromApi(){if(!this.loadingData){this.loadingData=!0;let e={url:this.permissions.canList?"ordenes/listar":"ordenes/ver-pendientes",params:{branch_id:this.$store.getters.getCurrBranchID,cooks:this.$store.getters.getChosenCooksIDs.join()}};this.$refs.axios&&this.$refs.axios.submit(e)}},setChosenCooks(e){this.enableTimer(),this.$store.commit("setChosenCooks",e);let t=this.$store.getters.getChosenCooksIDs,s={url:"auth/marcar-elaboradores-autenticados",snackbar:!1,method:"post",params:{cook_ids:t,branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(s)}}},st=tt,rt=s("0798"),it=Object(u["a"])(st,r,i,!1,null,null,null);t["default"]=it.exports;p()(it,{VAlert:rt["a"],VContainer:U["a"],VFlex:b["a"],VLayout:D["a"]})},bfb0:function(e,t,s){"use strict";var r=s("dc24"),i=s.n(r);i.a},cd50:function(e,t,s){},d3e7:function(e,t,s){"use strict";var r=s("cd50"),i=s.n(r);i.a},dc24:function(e,t,s){},e481:function(e,t,s){e.exports=s.p+"img/table0.cb361b8d.png"},e98a:function(e,t,s){"use strict";var r=s("9900"),i=s.n(r);i.a},ec29:function(e,t,s){},ed14:function(e,t,s){e.exports=s.p+"img/table-1.2597e2c9.png"},f6ac:function(e,t,s){"use strict";var r=s("8fb7"),i=s.n(r);i.a},f7b4:function(e,t,s){e.exports=s.p+"img/cheff_f.70432e07.png"}}]);
//# sourceMappingURL=chunk-f49b3e6e.d4c64cc2.js.map