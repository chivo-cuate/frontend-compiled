(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aedc538"],{"0798":function(e,t,r){"use strict";r("0c18");var s=r("10d2"),a=r("afdd"),i=r("9d26"),n=r("f2e7"),o=r("7560"),d=r("f40d"),l=r("58df"),c=r("d9bd");t["a"]=Object(l["a"])(s["a"],n["a"],d["a"]).extend({name:"v-alert",props:{border:{type:String,validator(e){return["top","right","bottom","left"].includes(e)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,icon:{default:"",type:[Boolean,String],validator(e){return"string"===typeof e||!1===e}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(e){return["info","error","success","warning"].includes(e)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(a["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(i["a"],{props:{color:e}},"$cancel")])},__cachedIcon(){return this.computedIcon?this.$createElement(i["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...s["a"].options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e[`v-alert--border-${this.border}`]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||o["a"].options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&Object(c["a"])("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],t={staticClass:"v-alert__wrapper"};return this.$createElement("div",t,e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const t=this.hasText?this.setTextColor:this.setBackgroundColor;e=t(this.computedColor,e)}return this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}})},"09de":function(e,t,r){"use strict";var s=r("89a7"),a=r.n(s);a.a},"0c18":function(e,t,r){},"0db6":function(e,t,r){"use strict";var s=r("a28a"),a=r.n(s);a.a},"1aae":function(e,t,r){e.exports=r.p+"img/table2.cb361b8d.png"},"1fb1":function(e,t,r){var s={"./table-1.png":"ed14","./table0.png":"e481","./table1.png":"61ad","./table2.png":"1aae"};function a(e){var t=i(e);return r(t)}function i(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=i,e.exports=a,a.id="1fb1"},"269a":function(e,t){e.exports=function(e,t){var r="function"===typeof e.exports?e.exports.extendOptions:e.options;for(var s in"function"===typeof e.exports&&(r.directives=e.exports.options.directives),r.directives=r.directives||{},t)r.directives[s]=r.directives[s]||t[s]}},"448a":function(e,t,r){"use strict";var s=r("bbc4"),a=r.n(s);a.a},"48e5":function(e,t,r){"use strict";var s=r("6f93"),a=r.n(s);a.a},"61ad":function(e,t,r){e.exports=r.p+"img/table1.cb361b8d.png"},"6f93":function(e,t,r){},8138:function(e,t,r){e.exports=r.p+"img/takeaway.a8b07135.png"},"889b":function(e,t,r){e.exports=r.p+"img/cheff_m.53a4c640.png"},"89a7":function(e,t,r){},9900:function(e,t,r){},a28a:function(e,t,r){},ba26:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-flex",{attrs:{xs12:""}},[e.loadingInitialData?r("VProgress",{staticClass:"text-center",attrs:{message:"Cargando"}}):[this.$store.getters.getCurrBranch?[e.cooksEnabled?e._e():r("v-container",[r("v-flex",[r("v-alert",{staticClass:"animated flash",attrs:{dense:"",tile:"",prominent:"",dismissible:"",dark:"",color:"warning",border:"left",icon:"warning"}},[e._v("No existen elaboradores habilitados para el menú de hoy. Solo podrán ser procesadas las órdenes que no involucren alimentos elaborados.")])],1)],1),r("v-flex",{staticClass:"animated fadeIn",style:e.cooksEnabled?"":"margin-top: -30px;"},[e.permissions.canList?r("Tables",{ref:"tablesComp",attrs:{tables:e.tables,takeAwayOrders:e.takeAwayOrders,assets:e.assets,perms:e.permissions},on:{setResponse:function(t){return e.setResponse(t)}}}):e._e(),e.permissions.canViewPending?[r("PendingOrders",{attrs:{orders:e.pendingOrders}}),r("Cooks",{attrs:{cooks:e.cooks},on:{setResponse:function(t){return e.setResponse(t)}}})]:e._e()],2)]:[r("v-container",[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-alert",{staticClass:"animated flash",attrs:{dense:"",tile:"",prominent:"",dismissible:"",dark:"",color:"warning",border:"left",icon:"warning"}},[e._v("\n              Debe seleccionar una sucursal para poder usar esta página")])],1)],1)],1)]],r("AxiosComponent",{ref:"axios",on:{finish:function(t){return e.handleHttpResponse(t)}}})],2)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[e.perms.canCreateOPL?r("TakeAwayOrders",{attrs:{takeAwayOrders:e.takeAwayOrders},on:{showDlgMenu:function(t){return e.showDlgMenu()},setEditedTable:function(t){return e.setEditedTable(t)}}}):e._e(),e.perms.canCreateOPC?r("v-card",{attrs:{tile:""}},[r("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[r("v-icon",{staticClass:"white--text"},[e._v("local_dining")]),e._v("Mesas disponibles\n      "),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{text:""},on:{click:function(t){return e.showDlgMenu()}}},[e._v("Ver menú")])],1),r("v-layout",{attrs:{wrap:"","text-center":"","mt-8":"","pb-2":""}},e._l(e.tables,(function(t,s){return r("v-flex",{key:"table-"+s,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[r("Table",{attrs:{table:t,perms:e.perms},on:{setEditedTable:function(t){return e.setEditedTable(t)}}})],1)})),1),r("TableOrders",{attrs:{drwOrders:e.drwOrders,editedTable:e.editedTable,perms:e.perms},on:{close:function(t){return e.closeDrwOrders()},showYesNoDialog:function(t){return e.showYesNoDialog(t)}}}),r("SimpleTableDlg",{attrs:{visible:e.dlgViewOrder,width:500,title:"Productos",headers:e.viewOrderHeaders,items:e.compEditedAssetsInfo},on:{close:function(t){e.dlgViewOrder=!1}}}),r("YesNoDlg",{attrs:{visible:e.dlgCheckout,width:500,title:"Cerrar orden",question:"Se dispone a cerrar la cuenta # "+e.editedOrder.order_number+" "+(1===e.editedOrder.order_type_id?"de la mesa "+e.editedOrder.table_number:"para llevar")+" con un monto de:",chip:e.compOrderPrice,processing:e.handlingOrder},on:{yes:function(t){return e.checkout()},no:function(t){e.dlgCheckout=!1}}}),r("YesNoDlg",{attrs:{visible:e.dlgCancelOrder,width:350,title:"Cancelar orden",question:"Se dispone a cancelar la orden # "+e.editedOrder.order_number+" "+(1===e.editedOrder.order_type_id?"de la mesa "+e.editedOrder.table_number:"para llevar")+" con un monto de:",chip:e.compOrderPrice,processing:e.handlingOrder},on:{yes:function(t){return e.cancelOrder()},no:function(t){e.dlgCancelOrder=!1}}}),r("YesNoDlg",{attrs:{visible:e.dlgServeProducts,width:350,title:"Servir productos",question:"Se dispone a servir los productos de la orden # "+(this.editedOrderIndex+1)+" de la mesa "+e.editedTable.table_number+".",chip:null,processing:e.handlingOrder},on:{yes:function(t){return e.serveProducts()},no:function(t){e.dlgServeProducts=!1}}})],1):e._e(),r("SimpleTableDlg",{attrs:{visible:e.dlgViewMenu,width:700,title:"Menú",headers:e.dailyMenuHeaders,items:e.compDailyMenu},on:{close:function(t){e.dlgViewMenu=!1}}}),r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.dlgEditOrder,callback:function(t){e.dlgEditOrder=t},expression:"dlgEditOrder"}},[r("v-card",[r("v-card-title",{class:"headline "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[e._v("Mesa "+e._s(e.editedTable.table_number))]),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:"","mb-3":""}},[r("v-flex",{attrs:{xs12:""}},[r("v-btn",{class:e.$store.getters.getThemeColor+" white--text",attrs:{disabled:e.editedAssetsLength>0&&!e.validAssetForm},on:{click:function(t){return e.addAsset()}}},[r("v-icon",[e._v("mdi-food")]),e._v("Agregar\n              ")],1)],1)],1),r("v-form",{ref:"form",on:{submit:function(e){e.preventDefault()}},model:{value:e.validAssetForm,callback:function(t){e.validAssetForm=t},expression:"validAssetForm"}},[e._l(e.editedAssets,(function(t,s){return r("v-layout",{key:"prod-"+s,attrs:{wrap:""}},[r("v-flex",{attrs:{xs8:"",sm6:""}},[r("v-autocomplete",{staticStyle:{"max-height":"20px!important"},attrs:{"small-chips":"",rules:e.requiredRules,readonly:"1"===t.finished,items:e.assets,"item-color":e.$store.getters.getThemeColor,"item-text":"name","item-value":"id",label:"Producto","no-data-text":"No hay resultados"},on:{change:function(t){return e.removeDuplicateAssets()}},scopedSlots:e._u([{key:"item",fn:function(t){return[r("v-list-item-content",[r("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}}),r("v-list-item-subtitle",{domProps:{innerHTML:e._s("Precio: $"+t.item.price+(t.item.grams?" ("+t.item.grams+" gramos)":""))}})],1)]}}],null,!0),model:{value:t.asset_id,callback:function(r){e.$set(t,"asset_id",r)},expression:"editedAssetAux.asset_id"}})],1),r("v-flex",{attrs:{xs4:"",sm2:""}},[r("v-text-field",{attrs:{rules:e.numberRules,disabled:"1"===t.finished,label:"Unidades",type:"number"},model:{value:t.quantity,callback:function(r){e.$set(t,"quantity",r)},expression:"editedAssetAux.quantity"}})],1),r("v-flex",{attrs:{xs4:"",sm2:""}},[r("v-text-field",{attrs:{readonly:"",disabled:"1"===t.finished,value:e.getAssetPriceById(t.asset_id,t.quantity),label:"Precio"}})],1),r("v-flex",{attrs:{xs12:"",sm2:""}},[r("v-btn",{staticClass:"error",attrs:{width:"100%"},on:{click:function(t){return e.removeAsset(s)}}},[r("v-icon",[e._v("delete")])],1)],1)],1)})),r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("span",[e._v("Total:")]),r("v-chip",[r("v-icon",{attrs:{left:""}},[e._v("attach_money")]),e._v("\n                  "+e._s(e.compOrderPrice)+"\n                ")],1)],1)],1)],2)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{disabled:e.editedAssetsLength<1||!e.validAssetForm||e.handlingOrder,color:e.$store.getters.getThemeColor,text:""},on:{click:function(t){return e.sendOrder()}}},[e.handlingOrder?r("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:""}}):e._e(),r("span",{domProps:{innerHTML:e._s(e.editedOrder.id?"Editar":"Agregar")}})],1),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){e.dlgEditOrder=!1}}},[e._v("Cancelar")])],1)],1)],1),r("AxiosComponent",{ref:"axios",on:{finish:function(t){return e.handleHttpResponse(t)}}})],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-menu",{attrs:{"close-on-click":"",dark:"","offset-y":"",transition:"fade-transition",bottom:"","open-on-hover":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-flex",{staticClass:"text-center align-center"},[s("v-btn",{attrs:{text:"",disabled:""}},[e.table.orders_status_count?e._l(e.table.orders_status_count,(function(t,r){return s("v-badge",{key:"badge-"+r,staticClass:"animated slideInDown",style:"bottom: 32px; left: "+(19+20*r)+"px;",attrs:{color:t.icon_color,overlap:""},scopedSlots:e._u([{key:"badge",fn:function(){return[s("span",[e._v(e._s(t.count))])]},proxy:!0}],null,!0)})})):e._e(),s("v-img",{attrs:{src:r("1fb1")("./table"+e.table.status_id+".png"),width:"70px"}})],2)],1),s("v-flex",{attrs:{"mt-6":""}},[s("v-chip",e._g({staticClass:"table-number-menu"},a),[e._v("Mesa "+e._s(e.table.table_number))])],1)]}}])},[s("v-list",[e.perms.canCreateOPC?s("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.setEditedTable("add")}}},[s("v-icon",[e._v("local_dining")]),s("span",[e._v("Agregar orden")])],1):e._e(),-1!==e.table.status_id&&(e.perms.canEdit||e.perms.canDelete||e.perms.canCheckout)?s("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.setEditedTable("view-orders")}}},[s("v-icon",[e._v("local_dining")]),s("span",[e._v("Ver órdenes")])],1):e._e()],1)],1)},d=[],l={data(){return{handlingOrder:!1,editedOrdersByCategory:[],editedOrdersListIndex:-1,editedOrder:{},editedOrderIndex:{},editedAssets:[],editedAsset:{},drwOrders:!1,dlgTableOrder:!1,dlgCheckout:!1,dlgCancelOrder:!1,validAssetForm:!1,requiredRules:[e=>!!e||"Dato obligatorio"],numberRules:[e=>!!e||"Dato obligatorio",e=>e>0||"Dato incorrecto"],timer:null}},components:{},props:["table","perms"],methods:{setEditedTable(e){this.$emit("setEditedTable",{table:this.table,action:e,order_type:1})}}},c=l,u=(r("0db6"),r("2877")),h=r("6544"),p=r.n(h),m=r("4ca6"),v=r("8336"),b=r("cc20"),g=r("0e8f"),_=r("132d"),f=r("adda"),C=r("8860"),x=r("da13"),O=r("e449"),k=Object(u["a"])(c,o,d,!1,null,"2c328b05",null),w=k.exports;p()(k,{VBadge:m["a"],VBtn:v["a"],VChip:b["a"],VFlex:g["a"],VIcon:_["a"],VImg:f["a"],VList:C["a"],VListItem:x["a"],VMenu:O["a"]});var y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.drwOrders?r("v-navigation-drawer",{attrs:{absolute:"",temporary:"",permanent:e.drwOrders,right:"",bottom:""},model:{value:e.drwOrders,callback:function(t){e.drwOrders=t},expression:"drwOrders"}},[r("v-list-item",{staticClass:"grey"},[r("v-list-item-content",[r("v-list-item-title",{staticClass:"uppercase"},[e._v("Mesa "+e._s(e.editedTable.table_number))])],1),r("v-list-item-icon",[r("v-icon",{on:{click:function(t){return e.$emit("close")}}},[e._v("close")])],1)],1),r("v-divider"),r("v-list",{attrs:{dense:""}},e._l(e.editedTable.orders,(function(t,s){return r("v-list-item",{key:"order-"+s},[r("v-list-item-content",[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("v-chip",{attrs:{small:"",pill:"",link:""},on:{click:function(t){return e.emitEvent("dlgViewOrder",s)}}},[r("v-avatar",{class:t.gui_attribs.icon_color,attrs:{left:""}},[r("v-icon",{staticClass:"white--text",attrs:{size:"20"}},[e._v(e._s(t.gui_attribs.icon))])],1),r("span",[e._v("Orden #"+e._s(t.order_number))])],1)],1),r("v-flex",[r("v-layout",[t.gui_attribs.edit&&e.perms.canEdit?r("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"warning--text",on:{click:function(t){return e.emitEvent("dlgEditOrder",s)}}},[e._v("edit")]):e._e(),t.gui_attribs.serve?r("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"success--text",on:{click:function(t){return e.emitEvent("dlgServeProducts",s)}}},[e._v("check")]):e._e(),t.gui_attribs.checkout&&e.perms.canCheckout?r("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"success--text",on:{click:function(t){return e.emitEvent("dlgCheckout",s)}}},[e._v("attach_money")]):e._e(),t.gui_attribs.delete&&e.perms.canDelete?r("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"error--text",on:{click:function(t){return e.emitEvent("dlgCancelOrder",s)}}},[e._v("delete")]):e._e()],1)],1)],1)],1)],1)})),1)],1):e._e()},V=[],A={data(){return{editedOrder:null,editedAssets:null,dlgViewOrder:!1}},props:["drwOrders","editedTable","perms"],methods:{emitEvent(e,t){this.$emit("showYesNoDialog",{action:e,orderIndex:t})}}},T=A,$=(r("e98a"),r("8212")),D=r("ce7e"),E=r("a722"),I=r("5d23"),P=r("34c3"),L=r("f774"),B=r("269a"),M=r.n(B),F=r("5607"),S=Object(u["a"])(T,y,V,!1,null,"2c2d970e",null),N=S.exports;p()(S,{VAvatar:$["a"],VChip:b["a"],VDivider:D["a"],VFlex:g["a"],VIcon:_["a"],VLayout:E["a"],VList:C["a"],VListItem:x["a"],VListItemContent:I["a"],VListItemIcon:P["a"],VListItemTitle:I["c"],VNavigationDrawer:L["a"]}),M()(S,{Ripple:F["a"]});var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:e.width,persistent:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("v-card",[r("v-card-title",{class:"headline "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[e._v(e._s(e.title))]),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"hide-default-footer":"",items:e.items,"no-data-text":"No hay elementos"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v("Cerrar")])],1)],1)],1)},R=[],j={props:["visible","width","title","headers","items"]},H=j,Y=r("b0af"),z=r("99d9"),U=r("a523"),J=r("8fea"),W=r("169a"),G=r("2fa4"),K=Object(u["a"])(H,q,R,!1,null,null,null),Q=K.exports;p()(K,{VBtn:v["a"],VCard:Y["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VContainer:U["a"],VDataTable:J["a"],VDialog:W["a"],VSpacer:G["a"]});var X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:e.width,persistent:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("v-card",[r("v-card-title",{class:"headline "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[e._v(e._s(e.title))]),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card-text",[e._v(e._s(e.question))]),e.chip?r("v-card-text",{staticClass:"text-center"},[r("v-chip",{staticClass:"error",attrs:{label:"",large:""}},[r("v-icon",{attrs:{"x-large":"",color:"white",medium:"",left:""}},[e._v("attach_money")]),r("span",{staticClass:"display-1 font-weight-bold"},[e._v(e._s(e.chip))])],1)],1):e._e(),r("v-card-text",[e._v("¿Confirma que desea continuar?")])],1)],1)],1)],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{disabled:e.processing,color:e.$store.getters.getThemeColor,text:""},on:{click:function(t){return e.$emit("yes")}}},[e.processing?r("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:""}}):e._e(),r("span",[e._v("Continuar")])],1),r("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("no")}}},[e._v("Cancelar")])],1)],1)],1)},Z=[],ee={props:["visible","width","title","question","chip","processing"]},te=ee,re=r("490a"),se=Object(u["a"])(te,X,Z,!1,null,null,null),ae=se.exports;p()(se,{VBtn:v["a"],VCard:Y["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VChip:b["a"],VContainer:U["a"],VDialog:W["a"],VDivider:D["a"],VFlex:g["a"],VIcon:_["a"],VLayout:E["a"],VProgressCircular:re["a"],VSpacer:G["a"]});var ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mb-5 pb-3",attrs:{tile:""}},[r("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[r("v-icon",{staticClass:"white--text"},[e._v("card_giftcard")]),e._v("Órdenes para\n    llevar\n    "),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{text:""},on:{click:function(t){return e.showDlgMenu()}}},[e._v("Ver menú")])],1),r("v-layout",[r("v-spacer"),r("v-btn",{class:e.$store.getters.getThemeColor+" white--text mt-4 mr-4",on:{click:function(t){return e.setEditedTable("add")}}},[r("v-icon"),e._v("Nueva\n    ")],1)],1),e.takeAwayOrders.length>0?r("v-layout",{attrs:{wrap:"","mt-8":"","pb-2":""}},e._l(e.takeAwayOrders,(function(e,t){return r("v-flex",{key:"table-"+t,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[r("TakeAwayOrder",{attrs:{order:e}})],1)})),1):r("v-layout",{attrs:{wrap:""}},[r("v-flex",[r("p",{staticClass:"title text-center mt-5"},[e._v("No se han encontrado órdenes para llevar.")])])],1)],1)},ne=[],oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-layout",{attrs:{wrap:""}},[s("v-flex",[s("v-btn",{attrs:{text:"",disabled:""}},[s("v-img",{attrs:{src:r("8138"),width:"52px"}})],1),s("br"),s("v-menu",{attrs:{"close-on-click":"","offset-y":"",transition:"fade-transition",bottom:"","open-on-hover":"",dark:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[s("v-btn",e._g({staticClass:"mt-6",class:e.order.gui_attribs.icon_color,attrs:{small:"",dark:""}},r),[s("v-icon",{staticClass:"white--text",attrs:{size:"20"}},[e._v("\n              "+e._s(e.order.gui_attribs.icon))]),e._v(e._s("Orden #"+e.order.order_number)+"\n          ")],1)]}}])},[s("v-list",[e.order.gui_attribs.edit?s("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgEditOrder")}}},[s("v-icon",[e._v("edit")]),s("span",[e._v("Editar")])],1):e._e(),e.order.gui_attribs.delete?s("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgCancelOrder")}}},[s("v-icon",[e._v("close")]),s("span",[e._v("Eliminar")])],1):e._e(),e.order.gui_attribs.checkout?s("v-list-item",{staticClass:"dropdown-menu-item",on:{click:function(t){return e.showYesNoDialog("dlgCheckout")}}},[s("v-icon",[e._v("attach_money")]),s("span",[e._v("Cerrar cuenta")])],1):e._e()],1)],1)],1)],1)],1)},de=[],le={data(){return{}},components:{},props:["order"],methods:{showYesNoDialog(e){this.$root.$emit("showYesNoDialog",{action:e,order:this.order})}}},ce=le,ue=Object(u["a"])(ce,oe,de,!1,null,null,null),he=ue.exports;p()(ue,{VBtn:v["a"],VContainer:U["a"],VFlex:g["a"],VIcon:_["a"],VImg:f["a"],VLayout:E["a"],VList:C["a"],VListItem:x["a"],VMenu:O["a"]});var pe={data(){return{handlingOrder:!1,editedOrdersByCategory:[],editedOrdersListIndex:-1,editedOrder:{},editedOrderIndex:{},editedAssets:[],editedAsset:{},drwOrders:!1,dlgTableOrder:!1,dlgCheckout:!1,dlgCancelOrder:!1,validAssetForm:!1,requiredRules:[e=>!!e||"Dato obligatorio"],numberRules:[e=>!!e||"Dato obligatorio",e=>e>0||"Dato incorrecto"],timer:null}},components:{TakeAwayOrder:he},props:["table","perms","takeAwayOrders"],methods:{showDlgMenu(){this.$emit("showDlgMenu")},setEditedTable(e){this.$emit("setEditedTable",{table:-1,action:e,order_type:2})}}},me=pe,ve=(r("448a"),Object(u["a"])(me,ie,ne,!1,null,"1138fa0a",null)),be=ve.exports;p()(ve,{VBtn:v["a"],VCard:Y["a"],VCardTitle:z["c"],VFlex:g["a"],VIcon:_["a"],VLayout:E["a"],VSpacer:G["a"]});var ge={data(){return{handlingOrder:!1,editedTable:{},editedTableIndex:-1,editedOrders:[],editedOrdersListIndex:-1,editedOrder:{},editedOrderIndex:{},editedAssets:[],editedAsset:{},dailyMenu:[],drwOrders:!1,dlgViewMenu:!1,dlgViewOrder:!1,dlgEditOrder:!1,dlgCheckout:!1,dlgCancelOrder:!1,dlgServeProducts:!1,validAssetForm:!1,requiredRules:[e=>!!e||"Dato obligatorio"],numberRules:[e=>!!e||"Dato obligatorio",e=>e>0||"Dato incorrecto"],dailyMenuHeaders:[{text:"Categoría",value:"group"},{text:"Producto",value:"name"},{text:"Precio",value:"price"},{text:"Gramos",value:"grams"}],viewOrderHeaders:[{text:"Producto",value:"name"},{text:"Precio",value:"price"},{text:"Cantidad",value:"quantity"},{text:"Estado",value:"status"}]}},components:{Table:w,TableOrders:N,SimpleTableDlg:Q,YesNoDlg:ae,TakeAwayOrders:be},props:["tables","takeAwayOrders","assets","perms"],mounted(){this.$root.$on("showYesNoDialog",e=>{console.log(e.order),this.editedOrder=Object.assign({},e.order),this.setEditedAssets(),this.activateDlgFlag(e.action)})},watch:{editedOrders:function(e,t){e||(this.drwOrders=!1)}},computed:{compEditedAssetsInfo(){let e=[];return this.editedAssets.forEach(t=>{e.push({name:this.getAssetById(t.asset_id).name,quantity:t.quantity,price:this.getAssetPriceById(t.asset_id,t.quantity),status:"1"===t.finished?"Servido":"Pendiente"})}),e.push({name:"TOTAL",price:this.compOrderPrice}),e},compDailyMenu(){let e=[];return this.assets.forEach(t=>{t.divider||t.header||e.push(t)}),e},compOrderPrice(){let e=0;return this.editedAssets.forEach(t=>{e+=this.getAssetPriceById(t.asset_id,parseInt(t.quantity))}),e},editedAssetsLength(){return this.editedAssets.length}},methods:{closeDrwOrders(){this.drwOrders=!1,this.editedOrders=[]},setEditedAssets(){this.editedAssets=[],this.editedOrder.assets.forEach(e=>{e.price=this.getAssetById(e.asset_id).price,this.editedAssets.push(e)})},setEditedOrder(e){this.editedOrderIndex=e;let t=this.editedOrders[e];this.editedOrder=Object.assign({},t),this.setEditedAssets()},showDlgMenu(){this.dlgViewMenu=!0},showYesNoDialog(e){this.setEditedOrder(e.orderIndex),this.activateDlgFlag(e.action)},activateDlgFlag(e){switch(e){case"dlgEditOrder":this.dlgEditOrder=!0;break;case"dlgServeProducts":this.dlgServeProducts=!0;break;case"dlgCheckout":this.dlgCheckout=!0;break;case"dlgViewOrder":this.dlgViewOrder=!0;break;case"dlgCancelOrder":this.dlgCancelOrder=!0;break;default:break}},setEditedTable(e){switch(this.editedTable=e.table,this.editedTableIndex=this.tables.indexOf(this.editedTable),e.action){case"add":this.editedOrder={order_type_id:e.order_type},this.editedAssets=[],this.dlgEditOrder=!0;break;case"view-orders":this.editedOrders=this.editedTable.orders,this.drwOrders=!0;break;case"checkout":this.dlgCheckout=!0;break;case"cancel":this.dlgCancelOrder=!0;break}},getAssetById(e){let t=this.assets.find(t=>{return t.id===e});return t},getAssetPriceById(e,t){if(!e)return 0;let r=this.getAssetById(e);return r?parseInt(r.price)*(t?parseInt(t):1):0},removeAsset(e){this.editedAssets.splice(e,1),this.removeDuplicateAssets()},removeDuplicateAssets(){let e=[];for(let t=0;t<this.editedAssetsLength;t++){this.editedAssets[t].price=this.getAssetById(this.editedAssets[t].asset_id).price;let r=e.findIndex(e=>e.asset_id===this.editedAssets[t].asset_id&&"0"===e.finished);r>=0?e[r].quantity=parseInt(e[r].quantity)+parseInt(this.editedAssets[t].quantity):e.push(this.editedAssets[t])}this.editedAssets=e},addAsset(){this.removeDuplicateAssets(),this.editedAsset={quantity:1,finished:"0"},this.editedAssets.push(this.editedAsset)},sendOrder(){if(this.removeDuplicateAssets(),!this.handlingOrder){this.handlingOrder=!0;var e={url:this.editedOrder.id?"ordenes/editar":"ordenes/crear",snackbar:!0,method:"post",params:{item:{table_number:this.editedTable.table_number,id:this.editedOrder.id,order_type_id:this.editedOrder.order_type_id},assets:this.editedAssets,branch_id:this.$store.getters.getCurrBranch.id}};this.$refs.axios.submit(e)}},cancelOrder(){if(!this.handlingOrder){this.handlingOrder=!0;var e={url:"ordenes/eliminar",snackbar:!0,method:"post",params:{id:this.editedOrder.id,table_number:this.editedTable.table_number,branch_id:this.$store.getters.getCurrBranch.id}};this.$refs.axios.submit(e)}},serveProducts(){if(!this.handlingOrder){this.handlingOrder=!0;var e={url:"ordenes/servir-productos",snackbar:!0,method:"post",params:{id:this.editedOrder.id,table_number:this.editedTable.table_number,branch_id:this.$store.getters.getCurrBranch.id}};this.$refs.axios.submit(e)}},checkout(){if(!this.handlingOrder){this.handlingOrder=!0;var e={url:"ordenes/cerrar",snackbar:!0,method:"post",params:{id:this.editedOrder.id,table_number:this.editedTable.table_number,branch_id:this.$store.getters.getCurrBranch.id}};this.$refs.axios.submit(e)}},updateCurrTableAndOrders(e){this.editedTableIndex>-1&&(this.editedTable=e.data.tables[this.editedTableIndex],this.editedOrders=this.editedTable.orders)},handleHttpResponse(e){if(200===e.data.result.code){let t=e.data.result.response;this.handlingOrder=!1,this.dlgEditOrder=!1,this.dlgCheckout=!1,this.dlgCancelOrder=!1,this.dlgServeProducts=!1,"success"===t.code&&this.$emit("setResponse",t),this.updateCurrTableAndOrders(t)}}}},_e=ge,fe=(r("48e5"),r("c6a6")),Ce=r("4bd4"),xe=r("8654"),Oe=Object(u["a"])(_e,i,n,!1,null,"368d3688",null),ke=Oe.exports;p()(Oe,{VAutocomplete:fe["a"],VBtn:v["a"],VCard:Y["a"],VCardActions:z["a"],VCardText:z["b"],VCardTitle:z["c"],VChip:b["a"],VContainer:U["a"],VDialog:W["a"],VDivider:D["a"],VFlex:g["a"],VForm:Ce["a"],VIcon:_["a"],VLayout:E["a"],VListItemContent:I["a"],VListItemSubtitle:I["b"],VListItemTitle:I["c"],VProgressCircular:re["a"],VSpacer:G["a"],VTextField:xe["a"]});var we=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",{staticClass:"pb-4",attrs:{tile:""}},[r("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[r("v-icon",{staticClass:"white--text"},[e._v("access_time")]),e._v("Órdenes en cola")],1),e.orders.length>0?r("v-layout",{attrs:{wrap:"","mt-8":"","pb-2":""}},e._l(e.orders,(function(e,t){return r("v-flex",{key:"table-"+t,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[r("PendingOrder",{attrs:{order:e}})],1)})),1):r("v-layout",{attrs:{wrap:""}},[r("v-flex",[r("p",{staticClass:"title text-center mt-8"},[e._v("No se han encontrado órdenes en cola.")])])],1)],1)],1)},ye=[],Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{wrap:""}},[1===e.order.order_type_id?s("v-flex",{attrs:{"mt-4":""}},[s("v-btn",{attrs:{text:"",disabled:""}},[s("v-img",{attrs:{src:r("1fb1")("./table"+e.order.status_id+".png"),width:"70px"}})],1),s("br"),s("v-chip",{staticClass:"mt-1",attrs:{label:""}},[s("v-icon",{attrs:{small:""}},[e._v("mdi-tag")]),s("span",{domProps:{innerHTML:e._s((1===e.order.order_type_id?"Mesa "+e.order.table_number:"Para llevar")+" - orden "+e.order.order_number)}})],1),s("br"),e._l(e.order.assets,(function(t,r){return s("div",{key:"orderAsset-"+r},[s("span",[e._v(e._s(t.name))]),s("v-chip",{staticClass:"ml-1 error",attrs:{"x-small":""}},[e._v(e._s(t.quantity))]),s("br")],1)}))],2):s("v-flex",[s("v-btn",{attrs:{text:"",disabled:""}},[s("v-img",{attrs:{src:r("8138"),width:"50px"}})],1),s("br"),s("v-chip",{staticClass:"mt-5",attrs:{label:""}},[s("v-icon",{attrs:{small:""}},[e._v("mdi-tag")]),s("span",{domProps:{innerHTML:e._s((1===e.order.order_type_id?"Mesa "+e.order.table_number:"Para llevar")+" - orden "+e.order.order_number)}})],1),s("br"),e._l(e.order.assets,(function(t,r){return s("div",{key:"orderAsset-"+r},[s("span",[e._v(e._s(t.name))]),s("v-chip",{staticClass:"ml-1 error",attrs:{"x-small":""}},[e._v(e._s(t.quantity))]),s("br")],1)}))],2)],1)},Ae=[],Te={data(){return{}},components:{},props:["order"],methods:{}},$e=Te,De=Object(u["a"])($e,Ve,Ae,!1,null,null,null),Ee=De.exports;p()(De,{VBtn:v["a"],VChip:b["a"],VFlex:g["a"],VIcon:_["a"],VImg:f["a"],VLayout:E["a"]});var Ie={data(){return{}},components:{PendingOrder:Ee},props:["orders"]},Pe=Ie,Le=(r("d3e7"),Object(u["a"])(Pe,we,ye,!1,null,"5ba84c70",null)),Be=Le.exports;p()(Le,{VCard:Y["a"],VCardTitle:z["c"],VContainer:U["a"],VFlex:g["a"],VIcon:_["a"],VLayout:E["a"]});var Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-card",{attrs:{tile:""}},[r("v-card-title",{class:"title "+e.$store.getters.getThemeColor+" white--text",attrs:{"primary-title":""}},[r("v-icon",{staticClass:"white--text"},[e._v("mdi-account")]),e._v("Elaboradores habilitados\n    ")],1),r("v-layout",{attrs:{wrap:"","text-center":"","mt-8":""}},e._l(e.cooks,(function(t,s){return r("v-flex",{key:"table-"+s,staticClass:"animated fadeIn mr-5 ml-5 text-center"},[r("Cook",{attrs:{cook:t},on:{showDlgFinish:function(t){return e.setEditedCook(t)}}})],1)})),1),r("YesNoDlg",{attrs:{visible:e.dlgFinish,width:350,title:"Terminar orden",question:"Se dispone a dar por terminada la orden actual de "+e.editedCook.first_name+" "+e.editedCook.last_name+", asociada a la mesa "+e.editedCook.current_order.table_number+".",chip:null,processing:e.handlingOrder},on:{yes:function(t){return e.finishOrder()},no:function(t){e.dlgFinish=!1}}}),r("AxiosComponent",{ref:"axios",on:{finish:function(t){return e.handleHttpResponse(t)}}})],1)],1)},Fe=[],Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pb-3"},[s("v-card",[s("div",{staticClass:"d-flex flex-column align-center mb-3"},[s("v-img",{attrs:{src:r("F"===e.cook.sex?"f7b4":"889b"),width:"70px"}}),s("v-chip",{staticClass:"mt-1 cyan darken-3",attrs:{label:"",dark:""}},[e._v(e._s(e.cook.first_name+" "+e.cook.last_name))])],1),s("v-divider"),e.cook.current_order?[s("p",[s("v-chip",{staticClass:"mt-1",attrs:{label:""}},[s("v-icon",[e._v("mdi-tag")]),s("span",{domProps:{innerHTML:e._s((1===e.cook.current_order.order_type_id?"Mesa "+e.cook.current_order.table_number:"Para llevar")+" - orden "+e.cook.current_order.order_number)}})],1),s("br"),s("v-chip",{staticClass:"warning darken-1 mt-1",attrs:{label:""}},[s("v-icon",{staticClass:"white--text"},[e._v("mdi-timelapse")]),e._v("\n            "+e._s(e.cook.current_order.elapsed_time)+"\n          ")],1)],1),e._l(e.cook.current_order.assets,(function(t,r){return s("div",{key:"orderAsset-"+r},[s("span",[s("v-icon",{attrs:{small:""}},[e._v("local_dining")]),e._v("\n            "+e._s(t.asset_name)+"\n          ")],1),s("v-chip",{staticClass:"ml-1 error",attrs:{"x-small":""}},[e._v(e._s(t.quantity))]),s("br")],1)})),s("v-btn",{class:e.$store.getters.getThemeColor+" mt-3 no-radius white--text",attrs:{large:"",width:"100%"},on:{click:function(t){return e.$emit("showDlgFinish",e.cook)}}},[s("v-icon",[e._v("check")]),e._v("Terminar\n        ")],1)]:[s("p",{staticClass:"mt-3 pb-3 warning--text"},[e._v("No tiene orden asignada.")])]],2)],1)],1)},Ne=[],qe={props:["cook"]},Re=qe,je=Object(u["a"])(Re,Se,Ne,!1,null,null,null),He=je.exports;p()(je,{VBtn:v["a"],VCard:Y["a"],VChip:b["a"],VDivider:D["a"],VFlex:g["a"],VIcon:_["a"],VImg:f["a"],VLayout:E["a"]});var Ye={data(){return{editedCook:{current_order:{}},handlingOrder:!1,dlgFinish:!1}},components:{Cook:He,YesNoDlg:ae},props:["cooks"],methods:{setEditedCook(e){this.editedCook=e,this.dlgFinish=!0},finishOrder(e){if(!this.handlingOrder){this.handlingOrder=!0;var t={url:"ordenes/elaborar",snackbar:!0,method:"post",params:{id:this.editedCook.current_order.id,cook_id:this.editedCook.id,table_number:this.editedCook.current_order.table_number,branch_id:this.$store.getters.getCurrBranch.id}};this.$refs.axios.submit(t)}},handleHttpResponse(e){this.handlingOrder=!1;var t=e.data.result.response;this.operationMessage=t.msg,this.operationMessageType=t.code,this.dlgFinish=!1,"success"===t.code&&this.$emit("setResponse",t)}}},ze=Ye,Ue=(r("09de"),Object(u["a"])(ze,Me,Fe,!1,null,"6e92663c",null)),Je=Ue.exports;p()(Ue,{VCard:Y["a"],VCardTitle:z["c"],VContainer:U["a"],VFlex:g["a"],VIcon:_["a"],VLayout:E["a"]});var We={data(){return{loadingInitialData:!0,loadingData:!1,cooksEnabled:!0,tables:[],assets:[],takeAwayOrders:[],pendingOrders:[],cooks:[],timer:null,permissions:{canList:!1,canCreateOPC:!1,canCreateOPL:!1,canEdit:!1,canDelete:!1,canViewPending:!1,canCook:!1,canCheckout:!1}}},components:{Tables:ke,PendingOrders:Be,Cooks:Je},created(){this.$store.getters.getOrdersPermissions.forEach(e=>{e.perms.forEach(e=>{switch(e.text){case"Listar":this.permissions.canList=!0;break;case"Crear OPC":this.permissions.canCreateOPC=!0;break;case"Crear OPL":this.permissions.canCreateOPL=!0;break;case"Editar":this.permissions.canEdit=!0;break;case"Cancelar":this.permissions.canDelete=!0;break;case"Elaborar OPC":case"Elaborar OPL":this.permissions.canCook=!0;break;case"Ver pendientes":this.permissions.canViewPending=!0;break;case"Cerrar cuenta":this.permissions.canCheckout=!0;break;default:break}})}),this.permissions.canList||this.permissions.canViewPending||this.$router.push("/403")},mounted(){(this.permissions.canList||this.permissions.canViewPending)&&this.$store.getters.getCurrBranch?(this.timer=setInterval(this.getDataFromApi,5e3),this.getDataFromApi()):this.loadingInitialData=!1,this.$root.$emit("resetNotifications")},methods:{setResponse(e){this.tables=e.data.tables,this.takeAwayOrders=e.data.takeaway_orders,this.assets=e.data.assets,this.pendingOrders=e.data.orders,this.cooks=e.data.cooks,this.cooksEnabled=e.data.cooks_enabled,this.$root.$emit("setNotifications",e.data.notifications)},handleHttpResponse(e){if(this.loadingData=!1,this.loadingInitialData=!1,200===e.data.result.code){var t=e.data.result.response;switch(this.operationMessage=t.msg,this.operationMessageType=t.code,e.url.substring(e.url.lastIndexOf("/")+1)){case"listar":"success"===t.code&&(this.setResponse(t),this.$refs.tablesComp&&this.$refs.tablesComp.updateCurrTableAndOrders(t));break;case"ver-pendientes":"success"===t.code&&this.setResponse(t);break;default:break}}},getDataFromApi(){if(!this.loadingData){this.loadingData=!0;var e={url:this.permissions.canList?"ordenes/listar":"ordenes/ver-pendientes",params:{branch_id:this.$store.getters.getCurrBranch.id}};this.$refs.axios&&this.$refs.axios.submit(e)}}}},Ge=We,Ke=r("0798"),Qe=Object(u["a"])(Ge,s,a,!1,null,null,null);t["default"]=Qe.exports;p()(Qe,{VAlert:Ke["a"],VContainer:U["a"],VFlex:g["a"],VLayout:E["a"]})},bbc4:function(e,t,r){},cd50:function(e,t,r){},d3e7:function(e,t,r){"use strict";var s=r("cd50"),a=r.n(s);a.a},e481:function(e,t,r){e.exports=r.p+"img/table0.cb361b8d.png"},e98a:function(e,t,r){"use strict";var s=r("9900"),a=r.n(s);a.a},ed14:function(e,t,r){e.exports=r.p+"img/table-1.2597e2c9.png"},f7b4:function(e,t,r){e.exports=r.p+"img/cheff_f.70432e07.png"}}]);
//# sourceMappingURL=chunk-2aedc538.7491506f.js.map