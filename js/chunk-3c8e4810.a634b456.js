(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c8e4810"],{"3a2f":function(t,e,a){"use strict";a("9734");var s=a("4ad4"),i=a("a9ad"),r=a("16b7"),o=a("b848"),n=a("75eb"),l=a("f573"),d=a("f2e7"),c=a("80d2"),u=a("d9bd"),m=a("58df");e["a"]=Object(m["a"])(i["a"],r["a"],o["a"],n["a"],l["a"],d["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String,zIndex:{default:null}},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,a=!this.bottom&&!this.left&&!this.top&&!this.right,s=!1!==this.attach?t.offsetLeft:t.left;let i=0;return this.top||this.bottom||a?i=s+t.width/2-e.width/2:(this.left||this.right)&&(i=s+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(i-=parseInt(this.nudgeLeft)),this.nudgeRight&&(i+=parseInt(this.nudgeRight)),this.calcXOverflow(i,this.dimensions.content.width)+"px"},calculatedTop(){const{activator:t,content:e}=this.dimensions,a=!1!==this.attach?t.offsetTop:t.top;let s=0;return this.top||this.bottom?s=a+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(s=a+t.height/2-e.height/2),this.nudgeTop&&(s-=parseInt(this.nudgeTop)),this.nudgeBottom&&(s+=parseInt(this.nudgeBottom)),this.calcYOverflow(s+this.pageYOffset)+"px"},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:Object(c["g"])(this.maxWidth),minWidth:Object(c["g"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick(()=>{this.value&&this.callActivate()})},mounted(){"v-slot"===Object(c["s"])(this,"activator",!0)&&Object(u["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=s["a"].options.methods.genActivatorListeners.call(this);return t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")},t.keydown=t=>{t.keyCode===c["w"].esc&&(this.getActivator(t),this.runDelay("close"))},t},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent(()=>[this.genTransition()]),this.genActivator()])}})},"68b0":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:""}},[a("v-card",[a("v-list",{attrs:{dense:""}},t._l(t.$store.getters.getPermissions("Mi Sucursal"),(function(e,s){return a("v-list-item",{key:"action-"+s,attrs:{to:e.slug}},[a("v-list-item-action",[a("v-icon",{attrs:{color:t.$store.getters.getThemeColor}},[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.name))])],1)],1)})),1)],1)],1),a("v-flex",{attrs:{xs12:"",md8:"","text-center":""}},[a("v-flex",{attrs:{md11:"","offset-md1":""}},[a("v-card",{staticClass:"elevation-0"},[a("p",{staticClass:"text-center uppercase white--text",class:t.$store.getters.getThemeColor},[t._v(t._s(t.$route.params.action))]),"inicio"===t.currAction?a("Index"):t._e(),"almacen"===t.currAction?a("Stock",{staticClass:"animated fadeIn"}):t._e(),"menu-diario"===t.currAction?a("DailyMenu",{staticClass:"animated fadeIn"}):t._e(),"usuarios-sucursal"===t.currAction?a("MyUsers",{staticClass:"animated fadeIn"}):t._e()],1)],1)],1)],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",[a("span",{staticClass:"title"},[t._v("Seleccione la opción deseada.")])])},o=[],n={data:()=>({})},l=n,d=a("2877"),c=a("6544"),u=a.n(c),m=a("0e8f"),v=Object(d["a"])(l,r,o,!1,null,null,null),p=v.exports;u()(v,{VFlex:m["a"]});var h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,page:t.page,"items-per-page":10,loading:t.loadingItems,"footer-props":{itemsPerPageText:"Elementos por página",itemsPerPageOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:20,text:"20"},{value:9999999999,text:"Todos"}],showFirstLastPage:!1},"item-key":"name"},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{staticClass:"success--text"},[t._v("ALMACEN")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"550px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{disabled:t.loadingItems||t.updatingItem,color:t.$store.getters.getThemeColor,dark:""},on:{click:function(e){return t.addItem()}}},s),[a("v-icon",{attrs:{small:""}},[t._v("add")]),t._v("Adicionar\n            ")],1)]}}]),model:{value:t.dlgUpdateItem,callback:function(e){t.dlgUpdateItem=e},expression:"dlgUpdateItem"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"subtitle"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm8:""}},[a("v-autocomplete",{attrs:{outlined:"",rules:t.requiredRules,items:t.assets,"item-text":"name","item-value":"id",label:"Recurso","no-data-text":"No hay resultados"},model:{value:t.editedItem.asset_id,callback:function(e){t.$set(t.editedItem,"asset_id",e)},expression:"editedItem.asset_id"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredRules,outlined:"",label:"Cantidad"},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}})],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm8:""}},[a("v-autocomplete",{attrs:{outlined:"",rules:t.requiredRules,items:t.measureUnits,"item-value":"id","item-text":"name",label:"U/M"},model:{value:t.editedItem.measure_unit_id,callback:function(e){t.$set(t.editedItem,"measure_unit_id",e)},expression:"editedItem.measure_unit_id"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{rules:t.requiredRules,outlined:"",label:"Precio unitario"},model:{value:t.editedItem.price_in,callback:function(e){t.$set(t.editedItem,"price_in",e)},expression:"editedItem.price_in"}})],1)],1)],1)],1)],1),a("v-card-actions",{staticClass:"mr-5"},[a("v-spacer"),a("v-btn",{attrs:{disabled:!t.validForm||t.updatingItem,color:t.$store.getters.getThemeColor,text:""},on:{click:function(e){return t.save()}}},[t.updatingItem?a("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:"",color:t.$store.getters.getThemeColor}}):a("v-icon",{attrs:{small:""}},[t._v("check")]),a("span",[t._v("Aceptar")])],1),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){t.dlgUpdateItem=!1}}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300px",persistent:""},model:{value:t.dlgDeleteItem,callback:function(e){t.dlgDeleteItem=e},expression:"dlgDeleteItem"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"subtitle"},[t._v("Eliminar elemento")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[t._v("\n                      ¿Seguro que desea eliminar\n                      "),a("b",[t._v(t._s(t.editedItem.asset_name))]),t._v("?\n                    ")])])],1)],1)],1),a("v-card-actions",{staticClass:"mr-5"},[a("v-spacer"),a("v-btn",{attrs:{disabled:t.deletingItem,color:t.$store.getters.getThemeColor,text:""},on:{click:function(e){return t.remove()}}},[t.updatingItem?a("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:"",color:t.$store.getters.getThemeColor}}):a("v-icon",{attrs:{small:""}},[t._v("check")]),a("span",[t._v("Aceptar")])],1),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){t.dlgDeleteItem=!1}}},[t._v("Cancelar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({staticClass:"mr-2",attrs:{color:t.$store.getters.getThemeColor},on:{click:function(e){return t.editItem(s)}}},i),[t._v("edit")])]}}],null,!0)},[a("span",[t._v("Editar")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({attrs:{color:"warning"},on:{click:function(e){return t.deleteItem(s)}}},i),[t._v("delete")])]}}],null,!0)},[a("span",[t._v("Eliminar")])])]}},{key:"loading",fn:function(){return[a("VProgress",{staticClass:"text-center"})]},proxy:!0},{key:"no-data",fn:function(){return[t._v("No se han encontrado elementos.")]},proxy:!0}])}),a("AxiosComponent",{ref:"axios",on:{finish:function(e){return t.handleHttpResponse(e)}}})],1)},g=[],f={data(){return{dlgUpdateItem:!1,dlgDeleteItem:!1,page:1,pageCount:0,loadingItems:!0,editedIndex:-1,editedItem:{},validForm:!1,requiredRules:[t=>!!t||"Dato obligatorio"],items:[],assets:[],updatingItem:!1,deletingItem:!1,headers:[{text:"Recurso",value:"asset_name",align:"left"},{text:"Cantidad",value:"quantity_desc",align:"left"},{text:"Precio ent",value:"price_in",align:"left"},{text:"Tipo",value:"type_name",align:"left"},{text:"Acciones",value:"action",align:"left",sortable:!1}],measureUnits:[]}},computed:{formTitle(){return-1===this.editedIndex?"Adicionar":"Editar"}},mounted(){this.getDataFromApi()},methods:{handleHttpResponse(t){this.loadingItems=!1;let e=t.url.substring(t.url.lastIndexOf("/")+1);if(200===t.data.result.code){var a=t.data.result.response;switch(e){case"crear":case"editar":case"eliminar":this.dlgUpdateItem=!1,this.dlgDeleteItem=!1,this.updatingItem=!1,this.deletingItem=!1,"success"===a.code&&this.setScopeObjects(a);break;case"listar":this.setScopeObjects(a);break;default:break}}else this.dlgUpdateItem=!1,this.dlgDeleteItem=!1,this.updatingItem=!1,this.deletingItem=!1},setScopeObjects(t){this.items=t.data[0],this.assets=t.data[1],this.measureUnits=t.data[2]},getDataFromApi(){this.loadingItems=!0;var t={url:"almacen/listar",params:{branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(t)},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dlgUpdateItem=!0},addItem(){let t={id:-1,quantity:null,measure_unit_id:null,asset_id:null,price_in:null,branch_id:this.$store.getters.getCurrBranchID};this.editedItem=Object.assign({},t),this.dlgUpdateItem=!0},deleteItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dlgDeleteItem=!0},remove(){if(!this.deletingItem){this.deletingItem=!0;var t={method:"post",url:"almacen/eliminar",params:{id:this.editedItem.id,branch_id:this.$store.getters.getCurrBranchID},snackbar:!0};this.$refs.axios.submit(t)}},save(){if(!this.updatingItem){this.updatingItem=!0;var t={method:"post",url:-1===this.editedItem.id?"almacen/crear":"almacen/editar",params:{item:this.editedItem,branch_id:this.$store.getters.getCurrBranchID},snackbar:!0};this.$refs.axios.submit(t)}}}},x=f,I=a("c6a6"),b=a("8336"),_=a("b0af"),C=a("99d9"),k=a("a523"),y=a("8fea"),V=a("169a"),T=a("ce7e"),D=a("4bd4"),$=a("132d"),A=a("a722"),w=a("490a"),O=a("2fa4"),S=a("8654"),P=a("71d9"),U=a("2a7f"),F=a("3a2f"),E=Object(d["a"])(x,h,g,!1,null,null,null),L=E.exports;u()(E,{VAutocomplete:I["a"],VBtn:b["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VContainer:k["a"],VDataTable:y["a"],VDialog:V["a"],VDivider:T["a"],VFlex:m["a"],VForm:D["a"],VIcon:$["a"],VLayout:A["a"],VProgressCircular:w["a"],VSpacer:O["a"],VTextField:S["a"],VToolbar:P["a"],VToolbarTitle:U["b"],VTooltip:F["a"]});var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,page:t.page,"items-per-page":10,loading:t.loadingItems,"footer-props":{itemsPerPageText:"Elementos por página",itemsPerPageOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:20,text:"20"},{value:9999999999,text:"Todos"}],showFirstLastPage:!1},"item-key":"name"},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{staticClass:"success--text"},[t._v(t._s(t.menuDate))]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"400px",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{disabled:t.loadingItems||t.updatingItem,color:t.$store.getters.getThemeColor,dark:""},on:{click:function(e){return t.addItem()}}},s),[a("v-icon",{attrs:{small:""}},[t._v("add")]),t._v("Adicionar producto\n            ")],1)]}}]),model:{value:t.dlgUpdateItem,callback:function(e){t.dlgUpdateItem=e},expression:"dlgUpdateItem"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"subtitle"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{outlined:"",rules:t.requiredRules,items:t.assets,"item-text":"name","item-value":"id",label:"Producto","no-data-text":"No hay resultados"},scopedSlots:t._u([{key:"item",fn:function(e){return[a("v-list-item-content",[a("v-list-item-title",{domProps:{innerHTML:t._s(e.item.name)}}),a("v-list-item-subtitle",{domProps:{innerHTML:t._s("Precio de entrada (u): $"+e.item.price_in)}})],1)]}}]),model:{value:t.editedItem.asset_id,callback:function(e){t.$set(t.editedItem,"asset_id",e)},expression:"editedItem.asset_id"}})],1)],1),a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{rules:t.requiredRules,outlined:"",label:"Precio",hint:t.priceHint,"persistent-hint":""},model:{value:t.editedItem.price,callback:function(e){t.$set(t.editedItem,"price",e)},expression:"editedItem.price"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{outlined:"",label:"Medida"},model:{value:t.editedItem.grams,callback:function(e){t.$set(t.editedItem,"grams",e)},expression:"editedItem.grams"}})],1)],1)],1)],1)],1),a("v-card-actions",{staticClass:"mr-5"},[a("v-spacer"),a("v-btn",{attrs:{disabled:!t.validForm||t.updatingItem,color:t.$store.getters.getThemeColor,text:""},on:{click:function(e){return t.save()}}},[t.updatingItem?a("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:"",color:t.$store.getters.getThemeColor}}):a("v-icon",{attrs:{small:""}},[t._v("check")]),a("span",[t._v("Aceptar")])],1),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){t.dlgUpdateItem=!1}}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"300px",persistent:""},model:{value:t.dlgDeleteItem,callback:function(e){t.dlgDeleteItem=e},expression:"dlgDeleteItem"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"subtitle"},[t._v("Eliminar elemento")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[t._v("\n                      ¿Seguro que desea eliminar\n                      "),a("b",[t._v(t._s(t.editedItem.asset_name))]),t._v("?\n                    ")])])],1)],1)],1),a("v-card-actions",{staticClass:"mr-5"},[a("v-spacer"),a("v-btn",{attrs:{disabled:t.deletingItem,color:t.$store.getters.getThemeColor,text:""},on:{click:function(e){return t.remove()}}},[t.updatingItem?a("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:"",color:t.$store.getters.getThemeColor}}):a("v-icon",{attrs:{small:""}},[t._v("check")]),a("span",[t._v("Aceptar")])],1),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){t.dlgDeleteItem=!1}}},[t._v("Cancelar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({staticClass:"mr-2",attrs:{color:t.$store.getters.getThemeColor},on:{click:function(e){return t.editItem(s)}}},i),[t._v("edit")])]}}],null,!0)},[a("span",[t._v("Editar")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({attrs:{color:"warning"},on:{click:function(e){return t.deleteItem(s)}}},i),[t._v("delete")])]}}],null,!0)},[a("span",[t._v("Eliminar")])])]}},{key:"loading",fn:function(){return[a("VProgress",{staticClass:"text-center"})]},proxy:!0},{key:"no-data",fn:function(){return[t._v("No se han encontrado elementos.")]},proxy:!0}])}),t.canEnableCooks?a("v-card",{staticClass:"mt-3"},[a("v-container",[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",lg6:"","offset-lg2":""}},[a("v-autocomplete",{attrs:{chips:"",outlined:"",multiple:"",rules:t.requiredRules,items:t.allCooks,"item-text":"full_name","item-value":"id",label:"Elaboradores para este menú","no-data-text":"No hay resultados"},model:{value:t.menuCooks,callback:function(e){t.menuCooks=e},expression:"menuCooks"}})],1),a("v-flex",{attrs:{xs12:"",lg4:""}},[a("v-btn",{class:t.$store.getters.getThemeColor+" white--text",attrs:{disabled:t.updatingItem,"x-large":""},on:{click:function(e){return t.saveActiveCooks()}}},[t.updatingItem?a("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:"",color:t.$store.getters.getThemeColor}}):a("v-icon",{attrs:{small:""}},[t._v("check")]),t._v("Actualizar\n          ")],1)],1)],1)],1)],1):t._e(),a("AxiosComponent",{ref:"axios",on:{finish:function(e){return t.handleHttpResponse(e)}}})],1)},R=[],q={data(){return{dlgUpdateItem:!1,dlgDeleteItem:!1,page:1,pageCount:0,loadingItems:!0,editedIndex:-1,editedItem:{},validForm:!1,requiredRules:[t=>!!t||"Dato obligatorio"],items:[],assets:[],updatingItem:!1,deletingItem:!1,headers:[{text:"Producto",value:"asset_name",align:"left"},{text:"Precio",value:"price",align:"left"},{text:"Medida",value:"qty_with_measure",align:"left"},{text:"Acciones",value:"action",align:"left",sortable:!1}],measureUnits:[],menuCooks:[],allCooks:[],canEnableCooks:!1}},computed:{formTitle(){return-1===this.editedIndex?"Adicionar":"Editar"},priceIn(){if(this.editedItem.asset_id){let t=null;return this.assets.forEach(e=>{e.id===this.editedItem.asset_id&&(t=e.price_in)}),t}},priceHint(){if(this.priceIn){let t=this.editedItem.price-this.priceIn;return(t>0?"Ganacia: ":"Pérdida: ")+t}return"Seleccione un producto"},menuDate(){return this.items.length>0?this.items[0].date:"No hay productos"}},mounted(){this.$store.getters.getPermissions("Sucursales").forEach(t=>{"Menú diario"===t.name&&t.perms.forEach(t=>{"Habilitar elaboradores"===t.text&&(this.canEnableCooks=!0)})}),this.getDataFromApi()},methods:{handleHttpResponse(t){this.loadingItems=!1,this.dlgUpdateItem=!1,this.dlgDeleteItem=!1,this.updatingItem=!1,this.deletingItem=!1,this.setScopeObjects(t)},setScopeObjects(t){if(200===t.data.result.code){var e=t.data.result.response;this.items=e.data[0],this.assets=e.data[1],this.menuCooks=e.data[2],this.allCooks=e.data[3]}},getDataFromApi(){this.loadingItems=!0;var t={url:"menu-diario/listar",params:{branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(t)},editItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dlgUpdateItem=!0},addItem(){let t={id:-1,asset_id:null,price:null,grams:null};this.editedItem=Object.assign({},t),this.dlgUpdateItem=!0},deleteItem(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dlgDeleteItem=!0},remove(){if(!this.deletingItem){this.deletingItem=!0;var t={method:"post",url:"menu-diario/eliminar",params:{id:this.editedItem.id,branch_id:this.$store.getters.getCurrBranchID},snackbar:!0};this.$refs.axios.submit(t)}},save(){if(!this.updatingItem){this.updatingItem=!0;var t={method:"post",url:-1===this.editedItem.id?"menu-diario/crear":"menu-diario/editar",params:{item:this.editedItem,cooks:this.menuCooks,branch_id:this.$store.getters.getCurrBranchID},snackbar:!0};this.$refs.axios.submit(t)}},saveActiveCooks(){if(!this.updatingItem){this.updatingItem=!0;var t={method:"post",url:"menu-diario/habilitar-elaboradores",params:{cooks:this.menuCooks,branch_id:this.$store.getters.getCurrBranchID},snackbar:!0};this.$refs.axios.submit(t)}}}},B=q,M=a("5d23"),N=Object(d["a"])(B,j,R,!1,null,null,null),H=N.exports;u()(N,{VAutocomplete:I["a"],VBtn:b["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VContainer:k["a"],VDataTable:y["a"],VDialog:V["a"],VDivider:T["a"],VFlex:m["a"],VForm:D["a"],VIcon:$["a"],VLayout:A["a"],VListItemContent:M["a"],VListItemSubtitle:M["b"],VListItemTitle:M["c"],VProgressCircular:w["a"],VSpacer:O["a"],VTextField:S["a"],VToolbar:P["a"],VToolbarTitle:U["b"],VTooltip:F["a"]});var z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,page:t.page,"items-per-page":10,loading:t.loadingItems,"footer-props":{itemsPerPageText:"Elementos por página",itemsPerPageOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:20,text:"20"},{value:9999999999,text:"Todos"}],showFirstLastPage:!1},"item-key":"name"},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",{staticClass:"success--text uppercase"},[t._v("Mis elaboradores")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{attrs:{color:"success",text:""},on:{click:function(e){return t.getDataFromApi()}}},[a("v-icon",[t._v("mdi-refresh")])],1),a("v-dialog",{attrs:{"max-width":"300px",persistent:""},model:{value:t.dlgUpdateItem,callback:function(e){t.dlgUpdateItem=e},expression:"dlgUpdateItem"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"subtitle"},[t._v("Desconectar usuario")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[t._v("¿Seguro que desea desconectar a "+t._s(t.editedItem.full_name)+"?")])])],1)],1)],1),a("v-card-actions",{staticClass:"mr-5"},[a("v-spacer"),a("v-btn",{attrs:{disabled:t.updatingItem,color:t.$store.getters.getThemeColor,text:""},on:{click:function(e){return t.disconnect()}}},[t.updatingItem?a("v-progress-circular",{staticClass:"v-icon",attrs:{size:15,width:1,indeterminate:"",color:t.$store.getters.getThemeColor}}):a("v-icon",{attrs:{small:""}},[t._v("check")]),a("span",[t._v("Aceptar")])],1),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){t.dlgUpdateItem=!1}}},[a("v-icon",[t._v("close")]),t._v("Cancelar\n              ")],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[s.session_id?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-icon",t._g({staticClass:"mr-2",attrs:{color:"red"},on:{click:function(e){return t.showDisconnectDlg(s)}}},i),[t._v("mdi-logout")])]}}],null,!0)},[a("span",[t._v("Desconectar")])]):t._e()]}},{key:"item.is_online",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{color:"No"==s.is_online?"red":"green"}},[t._v("mdi-checkbox-blank-circle")])]}},{key:"loading",fn:function(){return[a("VProgress",{staticClass:"text-center"})]},proxy:!0},{key:"no-data",fn:function(){return[t._v("No se han encontrado elementos.")]},proxy:!0}])}),a("AxiosComponent",{ref:"axios",on:{finish:function(e){return t.handleHttpResponse(e)}}})],1)},W=[],Y={data(){return{dlgUpdateItem:!1,dlgUpdateItem:!1,page:1,pageCount:0,loadingItems:!0,editedIndex:-1,editedItem:{},validForm:!1,items:[],updatingItem:!1,headers:[{text:"Nombre completo",value:"full_name",align:"left"},{text:"Nombre de usuario",value:"username",align:"left"},{text:"Conectado",value:"is_online",align:"left"},{text:"ID de sesión",value:"session_id",align:"left"},{text:"Acciones",value:"action",align:"left",sortable:!1}]}},mounted(){this.getDataFromApi()},methods:{handleHttpResponse(t){this.loadingItems=!1;let e=t.url.substring(t.url.lastIndexOf("/")+1);if(200===t.data.result.code){var a=t.data.result.response;switch(e){case"desconectar":this.dlgUpdateItem=!1,this.updatingItem=!1,"success"===a.code&&this.setScopeObjects(a);break;case"listar":this.loadingItems=!1,this.setScopeObjects(a);break;default:break}}},setScopeObjects(t){this.items=t.data},getDataFromApi(){this.loadingItems=!0,this.items=[];var t={url:"usuarios-sucursal/listar",params:{branch_id:this.$store.getters.getCurrBranchID}};this.$refs.axios.submit(t)},showDisconnectDlg(t){this.editedIndex=this.items.indexOf(t),this.editedItem=Object.assign({},t),this.dlgUpdateItem=!0},disconnect(){if(!this.updatingItem){this.updatingItem=!0;var t={method:"post",url:"usuarios-sucursal/desconectar",params:{id:this.editedItem.id,branch_id:this.$store.getters.getCurrBranchID},snackbar:!0};this.$refs.axios.submit(t)}}}},J=Y,X=Object(d["a"])(J,z,W,!1,null,null,null),G=X.exports;u()(X,{VBtn:b["a"],VCard:_["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VContainer:k["a"],VDataTable:y["a"],VDialog:V["a"],VDivider:T["a"],VFlex:m["a"],VIcon:$["a"],VLayout:A["a"],VProgressCircular:w["a"],VSpacer:O["a"],VToolbar:P["a"],VToolbarTitle:U["b"],VTooltip:F["a"]});var Z={data:()=>({drawer:null,currAction:null}),components:{Index:p,Stock:L,DailyMenu:H,MyUsers:G},beforeRouteUpdate(t,e,a){this.verifyAction(t.params.action),a()},mounted(){this.verifyAction(this.$route.params.action)},methods:{verifyAction(t){if(this.currAction=t,"inicio"!==t){let e=!1;this.$store.getters.getPermissions("Mi Sucursal").forEach(a=>{let s=a.slug.substring(a.slug.lastIndexOf("/")+1);s===t&&(e=!0)}),e||this.$router.push("/not-found")}}}},K=Z,Q=a("8860"),tt=a("da13"),et=a("1800"),at=Object(d["a"])(K,s,i,!1,null,null,null);e["default"]=at.exports;u()(at,{VCard:_["a"],VContainer:k["a"],VFlex:m["a"],VIcon:$["a"],VLayout:A["a"],VList:Q["a"],VListItem:tt["a"],VListItemAction:et["a"],VListItemContent:M["a"],VListItemTitle:M["c"]})},9734:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3c8e4810.a634b456.js.map