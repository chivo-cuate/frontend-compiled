(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e819ef58"],{"169a":function(t,e,a){"use strict";a("368e");var s=a("4ad4"),i=a("b848"),o=a("75eb"),n=a("e707"),r=a("e4d3"),l=a("21be"),d=a("f2e7"),c=a("a293"),u=a("80d2"),h=a("bfc5"),p=a("58df");const m=Object(p["a"])(s["a"],i["a"],o["a"],n["a"],r["a"],l["a"],d["a"]);e["a"]=m.extend({name:"v-dialog",directives:{ClickOutside:c["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,fullWidth:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(!this.isActive||this.$refs.content.contains(e))&&(this.$emit("click:outside"),this.persistent?(this.noClickAnimation||this.overlay!==e||this.animateClick(),!1):this.activeZIndex>=this.getMaxZIndex())},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):n["a"].options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$refs.content.focus(),this.bind()},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onKeydown(t){if(t.keyCode===u["u"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t.length&&t[0].focus()}}},render(t){const e=[],a={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:()=>{this.isActive=!1},args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],on:{click:t=>{t.stopPropagation()}},style:{}};this.fullscreen||(a.style={maxWidth:"none"===this.maxWidth?void 0:Object(u["e"])(this.maxWidth),width:"auto"===this.width?void 0:Object(u["e"])(this.width)}),e.push(this.genActivator());let s=t("div",a,this.showLazyContent(this.getContentSlot()));return this.transition&&(s=t("transition",{props:{name:this.transition,origin:this.origin}},[s])),e.push(t("div",{class:this.contentClasses,attrs:{role:"document",tabindex:0,...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.$createElement(h["a"],{props:{root:!0,light:this.light,dark:this.dark}},[s])])),t("div",{staticClass:"v-dialog__container",attrs:{role:"dialog"},style:{display:!this.hasActivator||this.fullWidth?"block":"inline-block"}},e)}})},"368e":function(t,e,a){},"9cec":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",[t.loadingInitialElements?a("VProgress",{staticClass:"text-center",attrs:{message:"Cargando"}}):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"animated fadeIn",attrs:{xs12:""}},[a("v-card",[a("v-container",{attrs:{"pa-10":""}},[a("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.profileValidationStatus,callback:function(e){t.profileValidationStatus=e},expression:"profileValidationStatus"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm5:"",md5:""}},[a("v-text-field",{attrs:{autofocus:!0,name:"name",label:"Nombres",type:"text",rules:t.nameRules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},model:{value:t.userData.first_name,callback:function(e){t.$set(t.userData,"first_name",e)},expression:"userData.first_name"}}),a("v-text-field",{attrs:{name:"last_name",label:"Apellidos",type:"text",rules:t.lastNameRules},model:{value:t.userData.last_name,callback:function(e){t.$set(t.userData,"last_name",e)},expression:"userData.last_name"}})],1),a("v-flex",{attrs:{"offset-sm2":"",sm5:""}},[a("v-text-field",{attrs:{name:"email",label:"Correo electrónico",type:"email",rules:t.emailRules},model:{value:t.userData.email,callback:function(e){t.$set(t.userData,"email",e)},expression:"userData.email"}}),a("v-text-field",{attrs:{name:"address",label:"Nombre de usuario",type:"text",rules:t.nameRules},model:{value:t.userData.username,callback:function(e){t.$set(t.userData,"username",e)},expression:"userData.username"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:"","mt-5":""}},[a("v-flex",{attrs:{xs12:"","mt-2":""}},[a("v-tooltip",{attrs:{right:"",color:t.validationColor},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"white--text",attrs:{disabled:t.loading,color:t.profileValidationStatus?t.$store.getters.getThemeColor:"error"},on:{click:function(e){return t.updateProfile()}}},s),[t.loading?a("v-progress-circular",{staticClass:"gray--text fa",attrs:{width:2,size:"18",indeterminate:""}}):!t.loading&&t.profileValidationStatus?a("v-icon",{attrs:{small:""}},[t._v("check")]):t.loading||t.profileValidationStatus?t._e():a("v-icon",{attrs:{small:""}},[t._v("error_outline")]),t._v("Actualizar perfil\n                    ")],1)]}}])},[a("span",[t._v(t._s(t.validationMessage))])])],1),a("v-flex",{attrs:{xs12:"","mt-2":""}},[a("v-btn",{staticClass:"white--text",attrs:{color:"warning"},on:{click:function(e){t.dlgChangePassword=!0}}},[a("v-icon",{attrs:{size:"22"}},[t._v("lock")]),t._v(" Cambiar contraseña\n                ")],1)],1)],1),a("v-dialog",{attrs:{width:"400",persistent:""},model:{value:t.dlgChangePassword,callback:function(e){t.dlgChangePassword=e},expression:"dlgChangePassword"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("Cambiar contraseña")]),a("v-container",{attrs:{"pt-5":"","pr-10":"","pb-5":"","pl-10":""}},[a("v-form",{ref:"passwordForm",on:{submit:function(t){t.preventDefault()}},model:{value:t.passwordValidationStatus,callback:function(e){t.passwordValidationStatus=e},expression:"passwordValidationStatus"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-text-field",{attrs:{autofocus:"","prepend-icon":"lock",label:"Actual",rules:t.nameRules,type:"password",hint:"Clave actual"},model:{value:t.userData.current_password,callback:function(e){t.$set(t.userData,"current_password",e)},expression:"userData.current_password"}}),a("v-text-field",{attrs:{"prepend-icon":"lock",label:"Nueva",rules:t.passwordRules,type:"password",hint:"Al menos 6 caracteres"},model:{value:t.userData.password,callback:function(e){t.$set(t.userData,"password",e)},expression:"userData.password"}}),a("v-text-field",{attrs:{"prepend-icon":"lock",label:"Confirmar",rules:t.passwordConfirmRules,type:"password",hint:"Vuelva a escribir la clave"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changePassword()}},model:{value:t.userData.password_confirm,callback:function(e){t.$set(t.userData,"password_confirm",e)},expression:"userData.password_confirm"}})],1),a("v-layout",{attrs:{row:"",wrap:"","mt-4":""}},[a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{disabled:t.loading,color:t.$store.getters.getThemeColor,text:""},on:{click:function(e){return t.changePassword()}}},[t.loading?a("v-progress-circular",{staticClass:"gray--text fa",attrs:{width:2,size:"18",indeterminate:""}}):a("v-icon",{attrs:{size:"22"}},[t._v("done")]),t._v("Aceptar\n                      ")],1),a("v-btn",{staticClass:"white--text ml-1",attrs:{color:"error",text:""},on:{click:function(e){return t.closePasswordDlg()}}},[t._v("Cancelar")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),a("AxiosComponent",{ref:"axios",on:{finish:function(e){return t.handleHttpResponse(e)}}})],1)},i=[],o={data(){return{dlgChangePassword:!1,dlgCancelReg:!1,uploadDialog:!1,uploadingImage:!1,loadingInitialElements:!0,nameRules:[t=>!!t||"Dato obligatorio"],lastNameRules:[t=>!!t||"Dato obligatorio"],dsaLetterRules:[t=>!!t||"Dato obligatorio"],passwordRules:[t=>!!t||"Dato obligatorio",t=>t&&t.length>5||"Al menos 6 caracteres"],passwordConfirmRules:[t=>!!t||"Dato obligatorio",t=>t===this.userData.password||"Los valores no coinciden"],emailRules:[t=>!!t||"Dato obligatorio",t=>/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)||"El formato no es correcto"],postcodeRules:[t=>!!t||"Dato obligatorio"],addressRules:[t=>!!t||"Dato obligatorio"],uploadDlg:!1,profileValidationStatus:!1,passwordValidationStatus:!1,loading:!1,userData:{}}},computed:{validationMessage:function(){return this.profileValidationStatus?"Todo listo!":"Verifique sus datos"},validationColor:function(){return this.profileValidationStatus?"grey":"red"}},mounted(){this.getProfileInfo()},methods:{updateProfile(){if(this.$refs.form.validate()){this.loading=!0;let t={method:"form",snackbar:!0,url:"auth/update-profile",params:new FormData,headers:{"Content-Type":"multipart/form-data"}};t.params.append("user_data",JSON.stringify(this.userData)),this.userData.dsa_letter&&t.params.append("dsa_letter",this.userData.dsa_letter),this.$refs.axios.submit(t)}},changePassword(){if(this.$refs.passwordForm.validate()){this.loading=!0;var t={url:"auth/change-password",method:"post",params:{current_password:this.userData.current_password,password:this.userData.password,password_confirm:this.userData.password_confirm}};this.$refs.axios.submit(t)}},closePasswordDlg(){this.userData.current_password=null,this.userData.password=null,this.userData.password_confirm=null,this.dlgChangePassword=!1},getProfileInfo(){this.loadingInitialElements=!0;let t={url:"auth/get-profile",params:{}};this.$refs.axios.submit(t)},setDSALetter(t){this.userData.dsa_letter=t,t?(this.userData.dsa_letter_name=t.name,this.uploadDlg=!1):this.userData.dsa_letter_name=null},showUpload(){this.uploadDialog=!0},handleHttpResponse(t){if(this.loading=!1,this.loadingInitialElements=!1,200===t.data.result.code){var e=t.data.result.response;switch(t.url.substring(t.url.lastIndexOf("/")+1)){case"get-profile":"success"===e.code&&(this.userData=e.data);break;case"change-password":"success"===e.code&&(this.dlgChangePassword=!1);break;default:break}}}}},n=o,r=a("2877"),l=a("6544"),d=a.n(l),c=a("8336"),u=a("b0af"),h=a("99d9"),p=a("a523"),m=a("169a"),f=a("0e8f"),v=a("4bd4"),g=a("132d"),w=a("a722"),b=a("490a"),x=a("2fa4"),k=a("8654"),D=a("3a2f"),y=Object(r["a"])(n,s,i,!1,null,null,null);e["default"]=y.exports;d()(y,{VBtn:c["a"],VCard:u["a"],VCardTitle:h["c"],VContainer:p["a"],VDialog:m["a"],VFlex:f["a"],VForm:v["a"],VIcon:g["a"],VLayout:w["a"],VProgressCircular:b["a"],VSpacer:x["a"],VTextField:k["a"],VTooltip:D["a"]})}}]);
//# sourceMappingURL=chunk-e819ef58.05427488.js.map